(this.webpackJsonpeatlas=this.webpackJsonpeatlas||[]).push([[0],{1067:function(e,t){},1076:function(e,t,n){},1187:function(e,t,n){},136:function(e,t,n){"use strict";var a=n(39),i=n(2),r=n(173),o=n(3);t.a=function(e){var t=Object(i.useState)([]),n=Object(a.a)(t,2),c=n[0],s=n[1],l=e.onSelectCallback,u=e.values,d=e.filter,h=e.multiVarSelect,f=e.title,p=e.single;return Object(o.jsx)(r.Select,{options:u,labelKey:"id",valueKey:"value",placeholder:f||"Choose",maxDropdownHeight:"300px",type:r.TYPE.search,multi:!p,onChange:function(e){var t=e.value;s(t),h?(0===Object.keys(t).length?delete h[d]:h[d]=new Set(t.map((function(e){return e.value}))),"function"===typeof l&&l(0===Object.keys(h).length?{what:""}:{what:"multi",selected:h})):"function"===typeof l&&l(t)},value:e.value||c})}},1506:function(e,t){},1993:function(e,t,n){},20:function(e,t,n){"use strict";n.d(t,"d",(function(){return V})),n.d(t,"o",(function(){return $})),n.d(t,"i",(function(){return F})),n.d(t,"s",(function(){return A})),n.d(t,"C",(function(){return L})),n.d(t,"B",(function(){return P})),n.d(t,"j",(function(){return _})),n.d(t,"A",(function(){return M})),n.d(t,"y",(function(){return Q})),n.d(t,"c",(function(){return W})),n.d(t,"x",(function(){return G})),n.d(t,"l",(function(){return K})),n.d(t,"k",(function(){return X})),n.d(t,"p",(function(){return te})),n.d(t,"n",(function(){return H})),n.d(t,"g",(function(){return E})),n.d(t,"z",(function(){return R})),n.d(t,"e",(function(){return B})),n.d(t,"w",(function(){return z})),n.d(t,"f",(function(){return U})),n.d(t,"h",(function(){return w})),n.d(t,"b",(function(){return J})),n.d(t,"t",(function(){return T})),n.d(t,"u",(function(){return D})),n.d(t,"a",(function(){return Y})),n.d(t,"m",(function(){return N})),n.d(t,"r",(function(){return Z})),n.d(t,"q",(function(){return q})),n.d(t,"v",(function(){return I}));var a=n(218),i=(n(2),n(2042)),r=n(2043),o=n(2044),c=n(2045),s=n(2046),l=n(2047),u=n(2041),d=n(283),h=n.n(d),f=n(984),p=n(65),b=n.n(p),j=n(42),g=n(417),m=n(341),y=n(587),v=n.n(y),O=n(276),x=n.p+"static/media/location-icon-atlas.37a766e0.png",C=n(91),k=n(244),S=n(3),w=function(e,t){fetch(e).then((function(e){return e.text()})).then((function(n){if(e.endsWith("csv"))v.a.csv2geojson(n,(function(e,n){e||"function"===typeof t&&t(n)}));else try{var a=JSON.parse(n);t(a)}catch(i){t(void 0,i)}})).catch((function(e){console.error(e),t(null,e)}))},L=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&t){var a=new Map;e.forEach((function(e){var i=e.properties[t];if(n&&i){var r=+i?+i:i;a.get(r)?a.set(r,a.get(r)+1):a.set(r,1)}}));var i=Array.from(a.keys());if(i&&i.length)return i.sort(O.a),i.map((function(e){return{x:e,y:+a.get(e)}}))}},_=(Object(u.a)().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]),function(e,t,n,a){var i=function(e,t){Object.keys(e).forEach((function(n){return t[n]=e[n]}))};if("icon"===e){var r={id:"icon-layer",data:t,pickable:!0,iconAtlas:x,iconMapping:f,sizeScale:60,getPosition:function(e){return e.geometry.coordinates},wrapLongitude:!0,onHover:n};return i(a,r),new g.a(r)}return function(e,t,n){var r=Object(k.b)(e);if(!r.class||!r.class.value)return null;var o={};return Object.keys(r).forEach((function(e){var t=r[e]&&r[e].type;o[e]="number"===t||"column"===t?r[e].default:"boolean"===t||"class"===t?r[e].value:r[e]})),o.data=t,o.id=e+"-layer",o.onHover=n,o.getPosition=function(e){return e.geometry.coordinates},i(a,o),new r.class.value(o)}(e,t,n)}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{oldMax:10,oldMin:1,newMax:1,newMin:0},n=(e-t.oldMin)*(t.newMax-t.newMin)/(t.oldMax-t.oldMin)+t.newMin;return+n.toFixed(2)},A=function(e){if(!e)return null;var t=h.a.parse(e.replace("?","")),n=Number(t.lat).toFixed(3),a=Number(t.lng).toFixed(3);return{latitude:isNaN(n)?53.8321:Number(n),longitude:isNaN(a)?-1.6362:Number(a),zoom:Number(h.a.parse(e).zoom)||10,pit:Number(h.a.parse(e).pit)||55,bea:Number(h.a.parse(e).bea)||0,alt:Number(h.a.parse(e).alt)||1.5}},N=function(e){if(!e)return null;var t=e._sw.lng,n=e._ne.lng,a=e._sw.lat,i=e._ne.lat;return t>n&&(n=e._sw.lng,t=e._ne.lng),a>i&&(i=e._sw.lat,a=e._ne.lat),{xmin:t,ymin:a,xmax:n,ymax:i}},M=function(e){var t=Object(j.randomToNumber)(e&&e.length);if(!e||!e[t].geometry||!e[t].geometry.type)return null;var n=Object(C.g)(e[t]);return new RegExp("point","i").test(n)?"grid":new RegExp("line","i").test(n)?"line":"geojson"},P=function(e){var t=b.a.UI_LIST;return e?1===e?t[0]:e>3&&e<=6?t[1]:2===e||3===e?t[2]:e>9&&e<15?t[3]:t[4]:t[1]},T=function(e){if(!e)return e;for(var t=e.split("_"),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:26;if(Object(j.isNumber)(e))return parseFloat(Number.parseFloat(e).toFixed(2).toString());if(!e||e.length<=t||!Object(j.isString)(e))return e;var n=e.trim(),a=e.split(".").length>1&&e.split(".").pop().length<10&&e.split(".").pop();return n.replace(a,""),e.length>10&&(n=n.substring(0,10)+"..."+(a||"")),n},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return+e?e:e.slice(0,t)+(e.length>t+t?"..."+e.slice(e.length-t,e.length):e.length>t?"...":"")},z=function(e,t,n,a){return Object(S.jsxs)("div",{onClick:function(){return"function"===typeof n&&n()},style:{cursor:"pointer",textAlign:"center",position:"relative",float:"left",width:"30%",color:a?"white":"black",margin:"10px 2px",border:"1px solid gray"},children:[Object(S.jsx)("span",{style:{position:"absolute",left:"10%"},children:e}),Object(S.jsx)("div",{style:{width:t+"%",height:20,background:"rgb(18, 147, 154)"}})]},e)},I=function(e){var t=document.createElement("a");return t.href=e,t.host&&t.host!==window.location.host},D=function(){var e,t=!1;return window.innerWidth<640||(e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t)};var U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,r=arguments.length>3?arguments[3]:void 0;if(!e||!Object(m.b)(t)||!t.length)return null;var o=t.indexOf(e),c=Object(j.isString)(r)&&V(r)?V(r):i.a,s=c(o/t.length);return s=s.substring(4,s.length-1).replace(/ /g,"").split(",").map((function(e){return+e})),[].concat(Object(a.a)(s),[n])},W=["inverseDefault","yellowblue","greens","oranges","diverge","default"],V=function(e){return e?e===W[0]?r.a:e===W[1]?o.a:e===W[2]?c.a:e===W[3]?s.a:e===W[4]?l.a:i.a:i.a},B=function(e){if(e){return{yellowblue:[[255,255,204],[199,233,180],[127,205,187],[65,182,196],[44,127,184],[37,52,148]],greens:[[237,248,233],[199,233,192],[161,217,155],[116,196,118],[49,163,84],[0,109,44]],oranges:[[254,237,222],[253,208,162],[253,174,107],[253,141,60],[230,85,13],[166,54,3]],diverge:[[140,81,10],[216,179,101],[246,232,195],[199,234,229],[90,180,172],[1,102,94]],inverseDefault:[[189,0,38],[240,59,32],[253,141,60],[254,178,76],[254,217,118],[255,255,178]],default:[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]]}[e]}},H=function(e){if(!Object(j.isString)(e))return null;return{yellowblue:[0,52,148],greens:[0,255,0],oranges:[166,166,0],diverge:[255,102,94],inverseDefault:[255,255,178],default:[189,0,38]}[e]},G=function(e,t){w("https://nominatim.openstreetmap.org/search/"+e+"?format=json",(function(e){"function"===typeof t&&t(e)}))},Y=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(S.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(S.jsxs)("g",{id:"ATI_logo_black_ATI_logo_black_W1024px",fill:e?"#ffffff":"#000000",children:[Object(S.jsxs)("g",{id:"logo-line-1","data-svg-origin":"0.8190000057220459 0.7929999828338623",transform:"matrix(1,0,0,1,0,0)",style:{zIndex:0,visibility:"inherit",opacity:1},children:[Object(S.jsx)("path",{d:"M273.346,71.521 L233.737,71.521 C235.771,58.945 242.738,52.485 253.966,52.485 C265.183,52.485 272.837,60.128 273.346,71.521 M299.694,83.932 C299.694,52.816 282.185,33.27 254.131,33.27 C226.425,33.27 207.72,52.816 207.72,81.718 C207.72,111.985 226.08,131.363 254.983,131.363 C277.938,131.363 293.744,120.479 299.529,100.424 L272.495,100.424 C269.775,107.735 263.987,111.475 255.493,111.475 C242.573,111.475 234.588,103.654 233.902,90.05 L299.529,90.05 C299.694,87.327 299.694,84.948 299.694,83.932",id:"Fill-13"}),Object(S.jsx)("path",{d:"M117.531,128.642 L143.027,128.642 L143.027,83.08 C143.027,63.192 148.647,53.667 160.371,53.667 C171.081,53.667 175.162,59.62 175.162,74.751 L175.162,128.642 L200.658,128.642 L200.658,72.031 C200.658,57.749 198.622,50.437 193.181,44.156 C187.738,37.861 178.392,33.78 169.209,33.78 C159.354,33.78 149.664,38.713 143.027,47.042 L143.027,0.793 L117.531,0.793 L117.531,128.642",id:"Fill-12"}),Object(S.jsx)("polyline",{id:"Fill-11",points:"55.645 0.796 0.819 0.796 0.819 23.242 42.3 23.242 42.3 128.632 69.158 128.632 69.158 23.242 110.474 23.242 110.474 0.796 55.645 0.796"})]}),Object(S.jsxs)("g",{id:"logo-line-2",transform:"matrix(1,0,0,1,169,149)","data-svg-origin":"0.9760000109672546 0.0860000029206276",style:{zIndex:0,visibility:"inherit",opacity:1},children:[Object(S.jsx)("path",{d:"M831.16,79.656 C831.16,94.445 823.69,104.3 812.635,104.3 C801.586,104.3 794.45,94.279 794.45,78.804 C794.45,63.671 801.928,53.308 812.814,53.308 C824.03,53.308 831.16,63.506 831.16,79.656 M855.82,108.724 L855.82,35.289 L832.87,35.289 L832.87,46.848 C825.9,37.158 818.078,33.076 807.029,33.076 C784.253,33.076 768.268,52.112 768.268,78.97 C768.268,106.169 783.222,124.202 805.668,124.202 C817.571,124.202 825.05,120.451 831.85,111.281 L831.85,120.972 C831.85,137.794 826.24,145.106 813.486,145.106 C804.306,145.106 798.025,140.515 797.504,133.382 L772.173,133.382 C773.877,152.076 789.175,163.125 813.145,163.125 C835.42,163.125 849.19,154.121 853.95,136.268 C855.65,129.631 855.82,127.087 855.82,108.724",id:"Fill-22"}),Object(S.jsx)("path",{d:"M701.193,35.283 L676.88,35.283 L676.88,127.932 L702.389,127.932 L702.389,79.994 C702.389,61.465 707.819,52.792 719.557,52.792 C724.997,52.792 729.589,55.349 732.133,59.417 C733.836,62.482 734.346,65.547 734.346,73.534 L734.346,127.932 L759.842,127.932 L759.842,75.402 C759.842,58.91 758.825,52.957 755.085,47.007 C749.476,38.168 739.951,33.249 728.227,33.249 C716.834,33.249 707.144,38.168 701.193,46.841 L701.193,35.283",id:"Fill-21"}),Object(S.jsx)("path",{d:"M637.104,24.567 L662.601,24.567 L662.601,0.088 L637.104,0.088 L637.104,24.567 Z M637.104,127.938 L662.601,127.938 L662.601,35.285 L637.104,35.285 L637.104,127.938 Z",id:"Fill-20"}),Object(S.jsx)("path",{d:"M569.69,127.936 L595.186,127.936 L595.186,86.965 C595.186,64.189 601.991,55.339 619.334,55.339 C622.055,55.339 623.747,55.515 626.467,56.191 L626.467,34.09 C624.089,33.238 622.564,33.073 619.676,33.073 C608.106,33.073 598.926,38.172 594.004,47.352 L594.004,35.286 L569.69,35.286 L569.69,127.936",id:"Fill-19"}),Object(S.jsx)("path",{d:"M532.476,127.936 L556.789,127.936 L556.789,35.286 L531.28,35.286 L531.28,83.225 C531.28,93.259 530.442,98.358 527.884,102.44 C524.822,107.538 519.721,110.424 514.112,110.424 C508.672,110.424 504.08,108.048 501.536,103.798 C499.833,100.737 499.323,97.672 499.323,89.685 L499.323,35.286 L473.827,35.286 L473.827,87.816 C473.827,104.308 474.847,110.259 478.584,116.212 C484.193,125.05 493.883,129.97 505.442,129.97 C516.67,129.97 526.36,125.05 532.476,116.377 L532.476,127.936",id:"Fill-18"}),Object(S.jsx)("polyline",{id:"Fill-17",points:"425.87 127.936 452.728 127.936 452.728 22.531 494.041 22.531 494.041 0.086 384.389 0.086 384.389 22.531 425.87 22.531 425.87 127.936"}),Object(S.jsx)("path",{d:"M287.694,35.283 L263.38,35.283 L263.38,127.932 L288.89,127.932 L288.89,79.994 C288.89,61.465 294.319,52.792 306.057,52.792 C311.498,52.792 316.089,55.349 318.633,59.417 C320.336,62.482 320.846,65.547 320.846,73.534 L320.846,127.932 L346.342,127.932 L346.342,75.402 C346.342,58.91 345.325,52.957 341.585,47.007 C335.977,38.168 326.452,33.249 314.728,33.249 C303.334,33.249 293.644,38.168 287.694,46.841 L287.694,35.283",id:"Fill-16"}),Object(S.jsx)("path",{d:"M226.718,85.77 C226.718,102.428 219.24,111.952 206.144,111.952 C197.991,111.952 192.206,107.364 192.206,101.08 C192.206,93.934 198.501,90.362 214.472,87.818 L223.322,86.456 C223.653,86.28 224.849,86.115 226.718,85.77 M250.687,87.473 C250.852,80.671 250.852,76.59 250.852,74.553 C250.852,57.388 248.818,50.077 241.851,43.272 C235.046,36.305 224.339,32.565 210.912,32.565 C186.088,32.565 170.448,44.468 169.254,64.356 L195.436,64.356 C195.944,55.175 201.221,50.584 211.419,50.584 C221.961,50.584 226.552,56.192 226.718,69.278 C215.5,69.964 200.37,72.177 192.041,74.388 C174.353,78.635 165.68,87.818 165.68,101.92 C165.68,118.413 179.451,129.971 199.353,129.971 C214.307,129.971 223.653,125.049 230.457,113.656 L230.457,117.396 C230.457,120.967 230.623,122.839 231.309,127.937 L253.244,127.937 C251.373,120.116 250.687,110.935 250.687,96.147 L250.687,87.473",id:"Fill-15"}),Object(S.jsx)("polygon",{id:"Fill-14",points:"130.939 127.937 156.435 127.937 156.435 0.087 130.939 0.087"}),Object(S.jsx)("path",{d:"M79.347,73.37 L45.508,73.37 L62.51,20.319 L79.347,73.37 Z M125.075,127.937 L80.529,0.087 L45.343,0.087 L0.976,127.937 L28.341,127.937 L38.541,96.311 L86.659,96.311 L97.024,127.937 L125.075,127.937 Z",id:"Fill-1"})]}),Object(S.jsxs)("g",{id:"logo-line-3",transform:"matrix(1,0,0,1,24,297)","data-svg-origin":"0.7670000195503235 0.34700000286102295",style:{zIndex:0,visibility:"inherit",opacity:1},children:[Object(S.jsx)("path",{d:"M592.476,71.073 L552.866,71.073 C554.9,58.497 561.868,52.037 573.096,52.037 C584.313,52.037 591.966,59.68 592.476,71.073 M618.824,83.484 C618.824,52.368 601.315,32.822 573.261,32.822 C545.552,32.822 526.849,52.368 526.849,81.273 C526.849,111.537 545.21,130.915 574.113,130.915 C597.068,130.915 612.874,120.031 618.659,99.976 L591.625,99.976 C588.902,107.29 583.117,111.028 574.623,111.028 C561.702,111.028 553.718,103.206 553.032,89.602 L618.659,89.602 C618.824,86.879 618.824,84.501 618.824,83.484",id:"Fill-10"}),Object(S.jsx)("path",{d:"M521.303,35.543 L506.348,35.543 L506.348,13.1 L480.839,13.1 L480.839,35.543 L467.246,35.543 L467.246,54.758 L480.839,54.758 L480.839,97.256 C480.839,109.501 481.858,114.765 485.43,120.029 C490.187,127.175 497.168,130.24 508.548,130.24 C513.826,130.24 516.546,129.898 521.303,128.702 L521.303,109.666 C518.238,110.008 517.221,110.173 516.039,110.173 C509.058,110.173 506.348,106.271 506.348,96.236 L506.348,54.758 L521.303,54.758 L521.303,35.543",id:"Fill-9"}),Object(S.jsx)("path",{d:"M434.281,128.196 L458.595,128.196 L458.595,35.546 L433.085,35.546 L433.085,83.485 C433.085,93.52 432.247,98.618 429.69,102.7 C426.625,107.799 421.527,110.684 415.918,110.684 C410.478,110.684 405.886,108.308 403.342,104.061 C401.639,100.997 401.129,97.932 401.129,89.945 L401.129,35.546 L375.633,35.546 L375.633,88.076 C375.633,104.568 376.65,110.519 380.39,116.472 C385.998,125.31 395.689,130.23 407.247,130.23 C418.476,130.23 428.163,125.31 434.281,116.637 L434.281,128.196",id:"Fill-8"}),Object(S.jsx)("path",{d:"M364.433,35.543 L349.479,35.543 L349.479,13.1 L323.969,13.1 L323.969,35.543 L310.376,35.543 L310.376,54.758 L323.969,54.758 L323.969,97.256 C323.969,109.501 324.989,114.765 328.56,120.029 C333.317,127.175 340.298,130.24 351.678,130.24 C356.956,130.24 359.676,129.898 364.433,128.702 L364.433,109.666 C361.368,110.008 360.351,110.173 359.169,110.173 C352.188,110.173 349.479,106.271 349.479,96.236 L349.479,54.758 L364.433,54.758 L364.433,35.543",id:"Fill-7"}),Object(S.jsx)("path",{d:"M288.764,0.347 L276.009,0.347 L276.009,24.823 L301.519,24.823 L301.519,0.347 L288.764,0.347 Z M288.764,35.533 L276.009,35.533 L276.009,128.197 L301.519,128.197 L301.519,35.533 L288.764,35.533 Z",id:"Fill-6"}),Object(S.jsx)("path",{d:"M265.918,35.543 L250.964,35.543 L250.964,13.1 L225.454,13.1 L225.454,35.543 L211.862,35.543 L211.862,54.758 L225.454,54.758 L225.454,97.256 C225.454,109.501 226.474,114.765 230.046,120.029 C234.803,127.175 241.784,130.24 253.164,130.24 C258.441,130.24 261.162,129.898 265.918,128.702 L265.918,109.666 C262.854,110.008 261.837,110.173 260.654,110.173 C253.673,110.173 250.964,106.271 250.964,96.236 L250.964,54.758 L265.918,54.758 L265.918,35.543",id:"Fill-5"}),Object(S.jsx)("path",{d:"M207.476,65.123 C207.641,44.891 193.194,32.825 168.373,32.825 C144.404,32.825 129.105,44.384 129.105,62.238 C129.105,69.029 131.991,75.83 137.092,80.422 C142.877,85.697 148.993,88.076 165.995,91.65 C178.57,94.359 183.162,97.421 183.162,103.209 C183.162,108.638 177.553,112.213 169.059,112.213 C158.341,112.213 152.732,107.111 152.909,97.256 L126.892,97.256 C127.236,118.849 142.367,130.918 168.883,130.918 C194.048,130.918 209.689,119.357 209.689,100.83 C209.689,86.714 201.36,78.209 182.997,73.452 L164.633,68.698 C157.666,66.826 154.601,64.272 154.601,60.19 C154.601,54.581 159.369,51.186 167.356,51.186 C177.719,51.186 181.98,55.091 182.487,65.123 L207.476,65.123",id:"Fill-4"}),Object(S.jsx)("path",{d:"M61.442,35.543 L37.128,35.543 L37.128,128.192 L62.638,128.192 L62.638,80.254 C62.638,61.725 68.068,53.055 79.806,53.055 C85.246,53.055 89.838,55.609 92.381,59.68 C94.085,62.742 94.594,65.807 94.594,73.794 L94.594,128.192 L120.091,128.192 L120.091,75.662 C120.091,59.17 119.074,53.22 115.334,47.267 C109.725,38.428 100.2,33.509 88.476,33.509 C77.083,33.509 67.392,38.428 61.442,47.102 L61.442,35.543",id:"Fill-3"}),Object(S.jsx)("polyline",{id:"Fill-2",points:"13.508 0.347 0.767 0.347 0.767 128.197 26.249 128.197 26.249 0.347 13.508 0.347"})]})]})})},K=function(e){var t=e.domain,n=e.interpolate,a=void 0===n?i.a:n,r=e.title,o=Object(j.randomToNumber)(t&&t.length);if(t&&Array.isArray(t)&&Object(j.isNumber)(t[o])){for(var c=t[t.length-1],s=t[0],l=[Object(S.jsx)("p",{children:r},"title")],u=0;u<10;u+=1)l.push(Object(S.jsxs)(S.Fragment,{children:[0===u&&Object(S.jsx)("i",{children:(r===T("Mean.Travel.Time..Seconds.")?+s/300:s).toFixed(2)}),Object(S.jsx)("span",{style:{background:a(u/10)}},u),9===u&&Object(S.jsx)("i",{children:(r===T("Mean.Travel.Time..Seconds.")?+c/300:c).toFixed(2)})]}));return l}},X=function(e,t){if(e&&Array.isArray(e)&&t&&e.length){var n=!0,a=[];return e.forEach((function(e){var i=e.properties[+t?Object.keys(e.properties)[t]:t];i&&(+i&&"Mean.Travel.Time..Seconds."===t?a.push(Math.floor(i/300)):+i?a.push(+i):(n=!1,a.push(i)))})),a=Array.from(new Set(a)),n&&(a=a.sort((function(e,t){return e-t}))),a}},q=function(e){return e.reduce((function(e,t){return e>=t?e:t}),-1/0)},Z=function(e){return e.reduce((function(e,t){return e<=t?e:t}),1/0)},J={version:8,sources:{"simple-tiles":{type:"raster",tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg"],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"simple-tiles"}]},Q=function(e,t,n){var a=Object.assign({},e);return a.features=[],Object(j.isObject)(e)&&Object(m.b)(t)&&Object(j.isString)(n)&&e.features&&e.features[0]&&e.features[0].properties[n]&&t[0]&&t[0].properties&&t[0].properties[n]?(e.features.forEach((function(e){for(var i=0;i<t.length;i++)if(e.properties[n]===t[i].properties[n]){var r={type:e.type,properties:t[i].properties,geometry:e.geometry};a.features.push(r);break}})),a):null},$=function(e){if(!Object(j.isObject)(e)||!Object.keys(e))return null;var t=new RegExp(b.a.DATE_REGEX);return Object.keys(e).filter((function(e){return t.test(e)}))[0]},ee=function(e){return e&&e.length&&e.length+" row"+(e.length>1?"s":"")},te=function(e,t){return e&&e.length&&t&&t.length?ee(e)+(e.length<t.length?" of "+t.length:""):e&&e.length?ee(e):t&&t.length&&!t[Object(j.randomToNumber)(t.length)].geometry?ee(t)+" - no geometry":"Nothing to show"}},2015:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(212),o=n.n(r),c=n(39),s=n(41),l=n(2075),u=n(2054),d=n(2070),h=n(584),f=n(438),p=n(1011),b=n(58),j=n(59),g=n(101),m=n(70),y=n(71),v=n(2055),O=n(442),x=n(585),C=n(586),k=n(341),S=n(20),w=n(65),L=n.n(w),_=n(2051),E=n(2071),A=n(2052),N=n(2022),M=n(1020),P=n(2025),T=n(596),R=n(53),F=(n(1076),n(139)),z=n(594),I=n(79),D=w.PRD_URL,U=function(e){var t=D+"/api/quant";Object(S.h)(t,(function(n,a){if(a||2!=n.length)console.log(a);else{var i=[],r={};JSON.parse(n[1]).features.forEach((function(e){r[e.properties.msoa11cd]=e.geometry.coordinates})),n[0].forEach((function(e){var t=I.d([r[e.origin_msoacode],r[e.destination_msoacode]],{base:+e.base,hs2:+e.data});t.geometry.coordinates[0]&&t.geometry.coordinates[1]&&i.push(t)})),i=I.b(i),e&&e(i,t)}}))},W=n(629),V=n(643),B=n(441),H=n(3),G=function(e){return e?Object(H.jsxs)(B.Card,{headerImage:e.image,title:e.title,children:[Object(H.jsx)(B.StyledBody,{children:e.body}),Object(H.jsx)(B.StyledAction,{children:Object(H.jsx)(R.Button,{onClick:function(){return"function"===typeof e.loadCallback&&e.loadCallback()},overrides:{BaseButton:{style:{width:"100%"}}},children:e.button})})]}):null},Y=n(587),K=w.PRD_URL,X=function(e){var t=a.useState(!1),n=Object(c.a)(t,2),i=n[0],r=n[1],o=e.urlCallback,l=e.toggleOpen;return Object(H.jsxs)(a.Fragment,{children:[Object(H.jsx)(R.Button,{kind:R.KIND.secondary,size:R.SIZE.compact,onClick:function(){r((function(e){return!e})),"function"===typeof l&&l()},children:"Add data"}),Object(H.jsxs)(F.Modal,{onClose:function(){"function"===typeof l&&l(),r(!1)},isOpen:i,children:[Object(H.jsx)(F.ModalHeader,{children:"Your data remains on your browser. It is NOT uploaded anywhere."}),Object(H.jsxs)(F.ModalBody,{children:[Object(H.jsx)(F.FocusOnce,{children:Object(H.jsx)(V.a,{urlCallback:function(e){r(!1),"function"===typeof o&&o(e)}})}),Object(H.jsx)(W.a,{contentCallback:function(e){var t=e.text,n=e.name;if(n&&(n.split(".")[1].match(/geo/)||n.split(".")[1].match(/json/)))try{var a=JSON.parse(t);"function"===typeof o&&o(null,a,n),r(!1)}catch(i){console.log(i)}else Y.csv2geojson(t,(function(e,t){e||"function"===typeof o&&o(null,t,n)}))}}),Object(H.jsx)(z.FlexGrid,{flexGridColumnCount:3,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",children:!Object({NODE_ENV:"production",PUBLIC_URL:"/eAtlas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/layik/eatlas-data/main/casualties.csv"}).NO_CARDS&&function(){var e={SPENSER:{image:"images/spenser.png",body:"SPENSER Cambridge sample.",api:K+"/api/spenser"},QUANT:{image:"images/quant.png",body:"QUANT HS2 scenario example.",api:U}};return Object.keys(e).map((function(t){return Object(H.jsx)(z.FlexGridItem,Object(s.a)(Object(s.a)({},q),{},{children:Object(H.jsx)(G,{button:"Load",title:t,image:e[t].image,body:e[t].body,loadCallback:function(){var n=e[t].api;n&&"function"===typeof n?n((function(e,t){return o(void 0,e,t)})):"function"===typeof o&&o(n),r(!1)}})}),t)}))}()})]}),Object(H.jsx)(F.ModalFooter,{children:Object(H.jsx)(F.ModalButton,{onClick:function(){r(!1),"function"===typeof l&&l()},children:"Close"})})]})]})},q={display:"flex",alignItems:"center",justifyContent:"center"},Z=n(136),J=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={bases:["dark","basic","streets","bright","light","satellite","No map"],selected:e.dark?"dark":"streets"},a}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.selected,a=t.bases,i=this.props,r=i.onSelectCallback,o=i.dark;return Object(H.jsx)(Z.a,{title:"dark"===n?"Default(dark)":o?n:"Default(streets)",single:!0,values:a.map((function(e){return{id:e,value:e}})),onSelectCallback:function(t){t&&t.length&&(e.setState({selected:t[0].value}),"function"===typeof r&&r(t[0].value))}})}}]),n}(i.a.Component),Q=n(63),$=n(697),ee=n(2076),te=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={timeDuration:!1},a}return Object(j.a)(n,[{key:"componentWillUnmount",value:function(){this.dismissTimeoutId&&clearTimeout(this.dismissTimeoutId)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.alert&&this.props.alert!==e.alert){var n=e.alert.time;this.setState({timeDuration:Boolean(alert)},(function(){t.dismissTimeout=setTimeout((function(){return t.setState({timeDuration:!1})}),n||5e3)}))}}},{key:"render",value:function(){var e=this.props.alert;return this.state.timeDuration&&e&&e.content?Object(H.jsx)(ee.a,{style:{border:"none",background:"#f8d7da",color:"#721c24",textAlign:"center"},variant:"danger",children:e.content}):null}}]),n}(a.Component),ne=n(91);function ae(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),i=n[0],r=n[1],o=e.colourCallback;return Object(H.jsxs)("div",{className:"color-picker-container",children:[Object(H.jsx)("p",{children:"Color:"}),S.c.map((function(e,t){return Object(H.jsx)("div",{style:{backgroundColor:0===t?"red":1===t?"blue":2===t?"green":3===t?"orange":4===t?"brown":"yellow"},className:"color-box"+(i===t?" color-box-active":""),onClick:function(){r(t),"function"===typeof o&&o(e)}},e)}))]})}var ie=function(e){var t=a.useState(!1),n=Object(c.a)(t,2),i=n[0],r=n[1],o=e.toggleOpen,s=e.title,l=e.component,u=e.button;return Object(H.jsxs)(a.Fragment,{children:[Object(H.jsx)("i",{style:{margin:5,cursor:"pointer",fontSize:"1.5em"},onClick:function(){"function"===typeof o&&o(),r(!0)},className:u||"fa fa-table"}),Object(H.jsxs)(F.Modal,{size:"80%",onClose:function(){"function"===typeof o&&o(),r(!1)},isOpen:i,children:[Object(H.jsx)(F.ModalHeader,{children:s}),Object(H.jsx)(F.ModalBody,{children:l}),Object(H.jsx)(F.ModalFooter,{children:Object(H.jsx)(R.Button,{kind:R.KIND.secondary,size:R.SIZE.compact,onClick:function(){r(!1),"function"===typeof o&&o()},children:"Okay"})})]})]})},re=n(698),oe=n(218),ce=n(237),se=n(708),le=n(274),ue=n(42),de=n(999),he=n.n(de),fe=n(0),pe=n.n(fe),be=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],je=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],ge="undefined"!==typeof window;var me=function(e){var t=function(t){Object(m.a)(a,t);var n=Object(y.a)(a);function a(e){var t;return Object(b.a)(this,a),(t=n.call(this,e)).p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(Object(g.a)(t)),t.syncEventHandlers=t.syncEventHandlers.bind(Object(g.a)(t)),t.attachUpdateEvents=t.attachUpdateEvents.bind(Object(g.a)(t)),t.getRef=t.getRef.bind(Object(g.a)(t)),t.handleUpdate=t.handleUpdate.bind(Object(g.a)(t)),t.figureCallback=t.figureCallback.bind(Object(g.a)(t)),t.updatePlotly=t.updatePlotly.bind(Object(g.a)(t)),t}return Object(j.a)(a,[{key:"updatePlotly",value:function(t,n,a){var i=this;this.p=this.p.then((function(){if(!i.unmounting){if(!i.el)throw new Error("Missing element reference");return e.react(i.el,{data:i.props.data,layout:i.props.layout,config:i.props.config,frames:i.props.frames})}})).then((function(){i.unmounting||(i.syncWindowResize(t),i.syncEventHandlers(),i.figureCallback(n),a&&i.attachUpdateEvents())})).catch((function(e){i.props.onError&&i.props.onError(e)}))}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(e){this.unmounting=!1;var t=e.frames&&e.frames.length?e.frames.length:0,n=this.props.frames&&this.props.frames.length?this.props.frames.length:0,a=!(e.layout===this.props.layout&&e.data===this.props.data&&e.config===this.props.config&&n===t),i=void 0!==e.revision,r=e.revision!==this.props.revision;(a||i&&(!i||r))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&ge&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&je.forEach((function(t){e.el.on(t,e.handleUpdate)}))}},{key:"removeUpdateEvents",value:function(){var e=this;this.el&&this.el.removeListener&&je.forEach((function(t){e.el.removeListener(t,e.handleUpdate)}))}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"===typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t){var n=this;ge&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(n.el)},window.addEventListener("resize",this.resizeHandler),t&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&ge&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var e=this;be.forEach((function(t){var n=e.props["on"+t],a=e.handlers[t],i=Boolean(a);n&&!i?e.addEventHandler(t,n):!n&&i?e.removeEventHandler(t):n&&i&&n!==a&&(e.removeEventHandler(t),e.addEventHandler(t,n))}))}},{key:"addEventHandler",value:function(e,t){this.handlers[e]=t,this.el.on(this.getPlotlyEventName(e),this.handlers[e])}},{key:"removeEventHandler",value:function(e){this.el.removeListener(this.getPlotlyEventName(e),this.handlers[e]),delete this.handlers[e]}},{key:"getPlotlyEventName",value:function(e){return"plotly_"+e.toLowerCase()}},{key:"render",value:function(){return Object(H.jsx)("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),a}(a.Component);return be.forEach((function(e){t.propTypes&&(t.propTypes["on"+e]=pe.a.func)})),t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t}(he.a),ye=function(e){var t=e.data,n=e.width,a=void 0===n?250:n,i=e.height,r=void 0===i?200:i,o=e.title,c=void 0===o?"Plot":o,s=e.dark,l=e.xaxis,u=void 0===l?{}:l,d=e.yaxis,h=void 0===d?{}:d,f=e.displayModeBar,p={visible:!0,color:s&&"#fff"},b={color:s&&"#fff"};return t&&Object(ue.isArray)(t)&&0!==t.length?Object(H.jsx)(me,{data:t,layout:{width:a,height:r,title:{text:c,font:b},margin:{t:30,r:20,b:50,l:30},paper_bgcolor:s&&"#0000",plot_bgcolor:s&&"#0000",xaxis:Object.assign(p,u),yaxis:Object.assign(b,h),legend:{x:.35,y:-.35,orientation:"h",font:b}},config:{displayModeBar:!f&&!1}}):null},ve=function(e){var t=e.data,n=e.year,a=e.multiVarSelect,i=e.onSelectCallback,r=e.callback;if(!t||!t.length||!Object.keys(t[0].properties))return null;var o=Object(S.o)(t[0].properties);if(!le.DateTime.fromISO(t[0].properties[o]).isValid)return null;var c=Object(oe.a)(new Set(Object(ne.c)({features:t},o).map((function(e){return le.DateTime.fromISO(e).year})).sort()));return c.length<2?null:Object(H.jsx)(se.a,{title:Object(H.jsxs)("h5",{children:["Year(s): ",n||c[0]+" - "+c[c.length-1],n&&Object(H.jsx)("i",{style:{fontSize:"2rem"},className:"fa fa-trash",onClick:function(){delete a[o],"function"===typeof i&&i(0===Object.keys(a).length?{what:""}:{what:"multi",selected:a}),r({year:"",multiVarSelect:a})}})]}),sublist:c,suggested:"slider",onChange:function(e){a[o]=new Set([e+""]),r({year:e+"",multiVarSelect:a}),"function"===typeof i&&i({selected:a,what:"multi"})}})},Oe=n(2023),xe=n(2056),Ce=w.PLOT_W,ke="rgb(18, 147, 154)",Se="rgb(239, 93, 40)",we=function(e,t,n){if(!e||!Object(ue.isArray)(e)||!e.length||!t)return null;var a=Ee(e,t);return a?Object(H.jsx)(ye,{dark:n,yaxis:{showgrid:!1},xaxis:{showgrid:!1},data:a.map((function(e,t){return{mode:"lines",showlegend:!1,x:e.map((function(e){return e.x})).sort((function(e,t){return new Date(e)-new Date(t)})),y:e.map((function(e){return e.y})),name:["Male","Female","Total"][t],marker:{color:Object(xe.a)(w.TURQUOISE_RANGE)(t/a.length)}}})),title:"Sex of Casualty"}):null},Le=function(e,t,n){if(!e||!Object(ue.isArray)(e)||!e.length)return null;var a=e[0].properties.hasOwnProperty(t)&&Object(S.C)(e,t);return a?Object(H.jsx)(ye,{dark:n,yaxis:{showgrid:!1},xaxis:{showgrid:!1},data:[{x:a.map((function(e){return+e.x})),y:a.map((function(e){return+e.y})),marker:{color:w.TURQUOISE_RANGE[0]}}],title:Object(S.t)(t)}):null},_e=function(e){if(e&&e.data&&e.data[0]&&e.data[0].properties.date&&e.data[0].properties.sex_of_casualty){var t=Object(ne.f)(e.data,"sex_of_casualty","date"),n=[],a=[];if(1!==Object.keys(t).length)return t&&Object.keys(t).forEach((function(e,a){n.push({x:0,x0:+t[e].Male,y:0===a?0:a,y0:a+1,color:"#428BCA"})})),t&&Object.keys(t).forEach((function(e,n){a.push({x:0,x0:-1*+t[e].Female,y:0===n?0:n,y0:n+1})})),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(Q.l,{margin:{left:e.margin||60},height:e.plotStyle&&e.plotStyle.height||Ce,width:e.plotStyle&&e.plotStyle.width||Ce,children:[Object(H.jsx)(Q.f,{color:ke,stroke:"black",data:a}),Object(H.jsx)(Q.f,{color:Se,stroke:"black",data:n}),Object(H.jsx)(Q.m,{tickSize:0,tickFormat:function(e){return 0===e?2009:e-2+2009},style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000",fontWeight:400}}}),Object(H.jsx)(Q.k,{tickSize:0,tickFormat:function(e){return Object(Oe.a)(".2s")(e<0?-1*e:e)},style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000",fontWeight:400}}})]}),Object(H.jsx)(Q.a,{orientation:"horizontal",width:Ce,items:[{title:"Male",color:Se},{title:"Female",color:ke}]})]})}},Ee=function(e,t){var n=Object(ue.isArray)(e)&&e.length>0&&t,a=[[],[],[]];if(n){var i=1===e.length?0:Math.floor(Math.random()*(e.length-1)+1),r=Object.keys(e[i].properties).filter((function(t){return Object(ne.d)(e[i].properties[t])}));if(r.length>0){var o=Object(ne.f)(e,t,r[0]);o&&Object.keys(o).length>1&&Object.keys(o).forEach((function(e){e&&o[e].Male&&o[e].Female&&(a[0].push({x:e,y:o[e].Male}),a[1].push({x:e,y:o[e].Female}),a[2].push({x:e,y:o[e].Male+o[e].Female}))}))}}return a[0].length?a:null},Ae=n(429),Ne=n(977),Me=n(276),Pe=n(2067),Te=(n(1993),function(e){e.className;var t=e.data,n=(e.marginLeft,e.marginTop,e.lineAttrs),a=e.plotStyle;if(!t||!Array.isArray(t)||0===t.length)return null;var i=!0;if(t.forEach((function(e){Object(ue.isNumber)(e)||(i=!1)})),!i)return null;var r=a&&a.height||100,o=t.sort(Me.a);o=o.map((function(e){return Object(S.g)(e,{oldMax:o[o.length-1],oldMin:o[0],newMax:95,newMin:5})}));var c=+Object(Pe.a)(o,.25).toFixed(2),l=+Object(Pe.a)(o,.5).toFixed(2),u=+Object(Pe.a)(o,.75).toFixed(2),d=+(u-c).toFixed(2),h=+(c-1.5*d).toFixed(2),f=+(c+1.5*d).toFixed(2),p=o.filter((function(e){return e>f||e<h})),b=t;return t.length>5&&(b=[],t.forEach((function(e,n){var a=Math.floor(t.length/5);if(1===a&&(a=2),n%a===0){var i=Math.floor(e);i>1e3&&(i=(i/1e3).toFixed(1)+"k"),b.push(i)}}))),Object(H.jsx)("div",{style:{width:"100%",height:r,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(H.jsx)("div",{style:{width:"100%",height:"100%",maxWidth:"600px"},children:Object(H.jsx)("svg",{width:"100%",height:"100%",children:Object(H.jsxs)("g",{style:{stroke:a&&a.lineColor||"rgb(18, 147, 154)"},children:[Object(H.jsx)("line",Object(s.a)({x1:h+"%",x2:c+"%",y1:"35%",y2:"35%"},n)),Object(H.jsx)("line",Object(s.a)({style:{strokeWidth:1},x1:h+"%",x2:h+"%",y1:"5%",y2:"65%"},n)),Object(H.jsx)("line",Object(s.a)({x1:f+"%",x2:u+"%",y1:"35%",y2:"35%"},n)),Object(H.jsx)("line",Object(s.a)({style:{strokeWidth:1},x1:f+"%",x2:f+"%",y1:"5%",y2:"65%"},n)),Object(H.jsx)("rect",{x:c+"%",width:d+"%",y:"5%",height:"60%",fill:a&&a.fillColor||"rgb(18, 147, 154)",stroke:"black 0.5px"}),Object(H.jsx)("line",Object(s.a)({style:{stroke:"black",strokeWidth:1},x1:l+"%",x2:l+"%",y1:"5%",y2:"65%"},n)),p.map((function(e,t){return Object(H.jsx)("circle",{r:"5",cx:(e>f?e+2:e-2)+"%",cy:"35%",style:{fill:"none",opacity:1}},e+"-"+t)})),b&&b.map((function(e,t){var n=t*(100/b.length);return Object(H.jsx)("g",{children:Object(H.jsx)("text",{x:n+2+"%",y:"85%",className:"d3-axis-labels",children:e})},n+"-"+t)}))]})})})})}),Re=n(244),Fe=n(428),ze=n(282);function Ie(e){var t=e.layerName,n=e.columnNames,a=e.onLayerOptionsCallback,r=i.a.useState(Object(Re.b)(t)),o=Object(c.a)(r,2),l=o[0],u=o[1],d=i.a.useState({}),h=Object(c.a)(d,2),f=h[0],p=h[1];return i.a.useEffect((function(){if(e.layerName){var t=Object(Re.b)(e.layerName);t&&u(t)}}),[e.layerName]),Object(H.jsx)(ze.Accordion,{children:Object(H.jsx)(ze.Panel,{title:"Settings: "+t,children:Object.keys(l).map((function(e){var t=l[e].type;return Object(ue.isString)(t)&&function(e,t){if("class"===t)return null;switch(e){case"number":return Object(H.jsxs)(H.Fragment,{children:[t,Object(H.jsx)(ce.Slider,{value:f[t]&&[f[t]]||[l[t].default],min:l[t].min,max:l[t].max,step:l[t].step,onChange:function(e){var n=e.value,i=Object(s.a)(Object(s.a)({},f),{},{[t]:n[0]});p(i),"function"===typeof a&&a(i)}})]});case"boolean":return Object(H.jsx)(Fe.Checkbox,{checked:f.hasOwnProperty(t)?f[t]:l[t].value,onChange:function(){var e=Object(s.a)(Object(s.a)({},f),{},{[t]:!f[t]});p(e),"function"===typeof a&&a(e)},children:Object(S.t)(t)});default:return Object(H.jsxs)(H.Fragment,{children:[t,Object(H.jsx)(Z.a,{title:Object(S.t)(t),single:!0,values:n.map((function(e){return{id:Object(S.t)(e),value:e}})),onSelectCallback:function(e){var n=Object(s.a)(Object(s.a)({},f),{},{[t]:function(n){return e.length?n.properties[e[0].value]:l[t].default}});p(n),"function"===typeof a&&a(n)}})]})}}(t,e)}))})})}var De=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={radius:100,elevation:4,year:"",reset:!1,multiVarSelect:{},barChartVariable:"road_type",datasetName:e.datasetName},a}return Object(j.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,a=n.data,i=n.alert,r=n.loading,o=n.layerStyle,c=this.state,s=c.elevation,l=c.radius,u=c.reset,d=c.year,h=c.barChartVariable;return u!==t.reset||d!==t.year||s!==t.elevation||l!==t.radius||i!==e.alert||r!==e.loading||o!==e.layerStyle||h!==t.barChartVariable||!(a&&e&&e.data&&a.length===e.data.length)}},{key:"render",value:function(){var e=this,t=this.state,n=t.year,a=t.subsetBoundsChange,i=t.multiVarSelect,r=t.barChartVariable,o=t.datasetName,c=this.props,l=c.onLayerOptionsCallback,u=c.onSelectCallback,d=c.data,h=c.colourCallback,f=c.unfilteredData,p=c.toggleSubsetBoundsChange,b=c.urlCallback,j=c.alert,g=c.layerStyle,m=c.onlocationChange,y=c.column,v=c.dark,O=c.toggleOpen,x=c.toggleHexPlot,C=d&&d.length>1,k=!g||new RegExp("grid|sgrid|hex|scatter","i").test(g),w=Object(ne.e)(d,"accident_severity"),L=[],F=C?Object(S.C)(d,y||r):[],z=C&&Object.keys(d[0].properties).filter((function(e){return!Object(ue.isEmptyOrSpaces)(e)})),I={data:F,opacity:1,stroke:"rgb(72, 87, 104)",fill:"rgb(18, 147, 154)"},D=function(t,n){e.setState({reset:!n,year:"",multiVarSelect:{},barChartVariable:"road_type",datasetName:t||o})};return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("div",{style:{color:v?"white":"black",background:v?"#242730":"white"},className:"side-panel",children:[Object(H.jsx)(te,{alert:j}),this._headerComponent(v,Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h2",{children:Object(S.p)(d,f)}),C&&Object(H.jsxs)("h6",{className:"truncate",children:["dataset: ",Object(S.i)(o,15)]})]})),Object(H.jsxs)("div",{children:[Object(H.jsx)(X,{toggleOpen:function(){return"function"===typeof O&&O()},urlCallback:function(e,t,n){D(e||n),"function"===typeof b&&b(e,t),"function"===typeof O&&O()}}),C&&Object(H.jsx)(ie,{toggleOpen:function(){return"function"===typeof O&&O()},component:Object(H.jsx)(re.a,{data:d})}),this.state.reset&&Object(H.jsx)(R.Button,{kind:R.KIND.secondary,size:R.SIZE.compact,onClick:function(){D(void 0,!0),"function"===typeof b&&b(),"function"===typeof e.props.showLegend&&e.props.showLegend(!1)},children:"Reset"})]}),Object(H.jsxs)("div",{className:"side-panel-body",children:[Object(H.jsxs)("div",{className:"side-panel-body-content",children:[ve({data:f,year:n,multiVarSelect:i,onSelectCallback:u,callback:function(t){return e.setState(t)}}),Object(H.jsx)("br",{}),w&&w.map((function(t){return Object(S.w)(t.x,100*t.y/d.length,(function(){i&&i.accident_severity&&i.accident_severity.has(t.x)?delete i.accident_severity:(i.accident_severity=new Set([t.x]),e.setState({multiVarSelect:i})),u&&u(0===Object.keys(i).length?{what:""}:{what:"multi",selected:i})}),v)})),Object(H.jsx)("hr",{style:{clear:"both"}}),L.length>1&&Object(H.jsx)(Te,{data:L}),Object(H.jsxs)(_.a,{defaultActiveKey:"1",id:"main-tabs",children:[Object(H.jsxs)(E.a,{eventKey:"1",title:Object(H.jsx)("i",{style:{fontSize:"2rem"},className:"fa fa-info"}),children:[this._panel(v,Object(H.jsx)(Ne.a,{data:d,dark:v,plotStyle:{width:270,margin:10}})),Le(d,"age_of_casualty",v),we(d,"sex_of_casualty",v),C&&z.length>0&&"grid"!==g&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h6",{children:"Column for layer:"}),Object(H.jsx)(Z.a,{title:"Choose Column",single:!0,value:y&&{id:Object(S.t)(y),value:y},values:z.map((function(e){return{id:Object(S.t)(e),value:e}})),onSelectCallback:function(t){var n=t&&t[0]?t[0].value:r;e.setState({barChartVariable:n}),"function"===typeof u&&u({what:"column",selected:n})}})]}),Object(H.jsx)(Ae.a,{dark:v,data:I.data,type:Q.j,onValueClick:function(t){i[y||r]=new Set([t.x+""]),e.setState({multiVarSelect:i}),u&&u({what:"multi",selected:i})},onDragSelected:function(t){i[y||r]=new Set(t.map((function(e){return e+""}))),e.setState({multiVarSelect:i}),u&&u({what:"multi",selected:i})},plotStyle:{marginBottom:100},noYAxis:!0}),_e({data:d,dark:v})]}),Object(H.jsxs)(E.a,{eventKey:"2",title:Object(H.jsx)("i",{style:{fontSize:"2rem"},className:"fa fa-sliders"}),children:[C&&this._headerComponent(v,Object(H.jsx)(ae,{colourCallback:function(e){return"function"===typeof h&&h(e)}})),C&&this._panel(v,Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h6",{children:"Deck Layer:"}),Object(H.jsx)(Z.a,{title:"Choose Layer",single:!0,values:Re.a.map((function(e){return{id:Object(S.t)(e),value:e}})),onSelectCallback:function(t){if(t&&t[0]){var n=t[0].value;e.setState({layerStyle:n}),"function"===typeof u&&u({what:"layerStyle",selected:n})}}}),Object(H.jsx)(Ie,{dark:v,layerName:g,columnNames:z,onLayerOptionsCallback:function(e){"function"===typeof l&&l(Object(s.a)({},e))}})]})),this._headerComponent(v,Object(H.jsxs)(H.Fragment,{children:["Map Styles",Object(H.jsx)("br",{}),Object(H.jsx)(J,{dark:v,onSelectCallback:function(e){return u&&u({selected:e,what:"mapstyle"})}})]})),C&&k&&Object(H.jsx)(A.a,{onChange:function(){return x&&x()},children:"Hex Plot"}),C&&Object(H.jsx)(A.a,{onChange:function(){e.setState({subsetBoundsChange:!a}),p&&"function"===typeof p&&p(!a)},children:"Subset by map boundary"})]}),Object(H.jsx)(E.a,{eventKey:"3",title:Object(H.jsx)("i",{style:{fontSize:"2rem"},className:"fa fa-filter",children:i&&Object.keys(i).length?Object.keys(i).length:""}),children:f&&f.length>0&&this._headerComponent(v,Object(H.jsx)($.a,{dark:v,multiVarSelect:i,onSelectCallback:function(t){"function"===typeof u&&u(0===Object.keys(t).length?{what:""}:{what:"multi",selected:t}),e.setState({multiVarSelect:t})},unfilteredData:f}))})]})]}),Object(H.jsx)("div",{className:"space"}),this._headerComponent(v,"Vis: "+(g||"None")),Object(H.jsx)("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),Object(S.x)(e.state.search,(function(e){var t=e&&e.length>0&&e[0].boundingbox;t=t&&t.map((function(e){return+e})),"function"===typeof m&&t&&m({bbox:t,lon:+e[0].lon,lat:+e[0].lat})}))},children:Object(H.jsx)(N.a,{children:Object(H.jsxs)(M.a,{children:[Object(H.jsx)(P.a,{style:{background:v?"#242730":"white",color:v?"white":"black"},onChange:function(t){return e.setState({search:t.target.value})},placeholder:"fly to...",type:"text"}),Object(H.jsx)(M.a.Addon,{style:{background:v?"#242730":"white",color:v?"white":"black"},children:Object(H.jsx)(T.a,{glyph:"search"})})]})})})]})]})})}},{key:"_headerComponent",value:function(e,t){return Object(H.jsx)("div",{style:{marginTop:2,background:e?"#29323C":"#eee"},className:"side-pane-header",children:t})}},{key:"_panel",value:function(e,t){return Object(H.jsx)("div",{style:{borderColor:e?"#29323C":"#eee"},className:"side-panel-group",children:t})}}]),n}(i.a.Component),Ue=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={hoveredNode:null,radius:10,offset:0},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.options,i=this.state,r=i.radius;i.hoveredNode;return n&&n.length?Object(H.jsxs)("div",{className:"centered-and-flexed",style:{color:"#fff"},children:[Object(H.jsx)(ce.Slider,{value:[this.state.radius],min:5,max:50,step:5,onChange:function(t){var n=t.value;e.setState({radius:n[0]})}}),"Radius (pixels)",Object(H.jsxs)(Q.l,{margin:{left:10,bottom:10},height:a&&a.plotStyle&&a.plotStyle.height||350,width:a&&a.plotStyle&&a.plotStyle.width||350,onMouseLeave:function(){return e.setState({hoveredNode:null})},children:[Object(H.jsx)(Q.c,{animation:!0,className:"hexbin-example",style:{stroke:"#125C77",strokeLinejoin:"round"},colorRange:["orange","cyan"],radius:r,data:n}),a&&!a.noXAxis&&Object(H.jsx)(Q.k,{tickLabelAngle:-45,style:{text:{fill:"#fff",fontWeight:400}}}),a&&!a.noYAxis&&Object(H.jsx)(Q.m,{tickLabelAngle:-45,style:{text:{fill:"#fff",fontWeight:400}}})]})]}):null}}]),n}(a.Component),We=function(e){var t=Object(a.useState)(!1===e.isMobile),n=Object(c.a)(t,2),i=n[0],r=n[1];Object(a.useEffect)((function(){!0!==e.open&&r(e.open)}),[e.open]);var o=e.data,s=o&&o.length>1;return s&&"POINT"===o[0].geometry.type.toUpperCase()?Object(H.jsxs)("div",{style:{marginRight:i?0:-350},className:"right-panel-container",children:[Object(H.jsx)("div",{className:"close-button",onClick:function(){return r(!i)},style:{color:"white"},children:Object(H.jsx)("i",{style:{marginLeft:-16,bottom:0,position:"absolute",backgroundColor:"#242730",fontSize:"2rem",color:"white !important"},className:i?"fa fa-arrow-circle-right":"fa fa-arrow-circle-left"})}),Object(H.jsx)("div",{className:"right-side-panel",children:s&&Object(H.jsx)(Ue,{data:Object(ne.a)({features:o}),options:{noXAxis:!0,noYAxis:!0}})})]}):null},Ve=function(e){var t=Object(a.useState)(!e.isMobile),n=Object(c.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)(!1),l=Object(c.a)(o,2),u=l[0],d=l[1];return Object(H.jsxs)("div",{className:"side-panel-container",style:{marginLeft:i?0:"-320px"},children:[Object(H.jsx)(De,Object(s.a)(Object(s.a)({},e),{},{toggleOpen:function(){return r((function(e){return!e}))},toggleHexPlot:function(){return d((function(e){return!e}))}})),u&&Object(H.jsx)(We,{open:i,isMobile:e.isMobile,data:e.data}),Object(H.jsx)("div",{className:"close-button",onClick:function(){return r(!i)},style:{color:"white"},children:Object(H.jsx)("div",{style:{backgroundColor:"#242730"},children:Object(H.jsx)("i",{style:{fontSize:"2rem",color:"white !important"},className:i?"fa fa-arrow-circle-left":"fa fa-arrow-circle-right"})})})]})},Be=n(278),He=Object(Be.a)(),Ge=(n(972),n(427)),Ye=220,Ke=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this)).state={isMobile:e.isMobile},a._listPropsAndValues=a._listPropsAndValues.bind(Object(g.a)(a)),a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._handleWindowSizeChange.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._handleWindowSizeChange.bind(this))}},{key:"_handleWindowSizeChange",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.topx,n=e.topy,a=e.hoveredObject,i=e.column1,r=void 0===i?"accident_severity":i,o=e.column2,c=void 0===o?"date":o,s=this.state.isMobile;if(!a)return null;var l=a.type&&"Feature"===a.type,u=a&&a.cluster,d=[];if(!l&&!u){var h=r&&Object(ne.c)({features:a.points.map((function(e){return e.source}))},r),f=r&&c&&Object(ne.f)(a.points.map((function(e){return e.source})),r,c);h&&h.forEach((function(e,t){Object.keys(f).forEach((function(n){n&&f[n][e]&&(d[t]||(d[t]={x:[],y:[],name:e,marker:{color:Object(xe.a)(w.TURQUOISE_RANGE)(t/h.length)}}),d[t].x.push(n),d[t].y.push(f[n][e]))}))})),d.map((function(e){e.x.length>1&&(e.mode="lines")}))}var p=window.innerWidth,b=window.innerHeight,j=s?10:n+300>b?n-Ye:n,g=s?10:t+Ye>p?t-Ye:t;return Object(H.jsxs)("div",{className:"xyz",style:{top:n+300>b?j:n,left:t+Ye>p?g:t},children:[Object(H.jsx)("div",{children:Object(H.jsxs)("b",{children:["Total: ",u?a.point_count:l?1:a.points.length]})}),Object(H.jsx)("div",{children:!u&&(l||a.points.length<=2)?this._listPropsAndValues(a):Object(H.jsx)(ye,{title:"".concat(Object(S.t)(r)," by ").concat(Object(S.t)(c)),width:Ye,data:d,dark:!0,xaxis:{tickformat:"d",showgrid:!1},yaxis:{showgrid:!1}})})]})}},{key:"_listPropsAndValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(!e.properties||e.points&&(!e.points||!e.points[0].properties))return null;var a=[],i=e.properties;if(i){var r=Object.keys(i);a=r.slice(1,t?r.length:n).map((function(e){return[Object(S.t)(e),i[e]]}))}else{var o=Object.keys(e.points[0].properties);a=o.slice(1,t?o.length:n).map((function(t){var n=[Object(S.t)(t),e.points[0].properties[t]];return e.points[1]&&n.push(e.points[1].properties[t]),n}))}return Object(H.jsx)(Ge.Table,{style:{maxWidth:"320px"},columns:e.points&&2===e.points.length?["Property","Value p1","Value p2"]:["Property","Value"],data:a})}}]),n}(i.a.Component),Xe=n(1005),qe=(L.a.PRD_URL,"https://raw.githubusercontent.com/layik/eatlas-data/main/casualties.csv"),Ze="linear-gradient(to top, red , yellow)",Je=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(b.a)(this,n),(a=t.call(this,e))._resize=function(){a.setState({width:window.innerWidth,height:window.innerHeight})};var i=L.a.DECKGL_INIT,r=Object(S.s)(e.location.search);return r&&Object.keys(r).forEach((function(e){Object.keys(i).forEach((function(t){t.startsWith(e)&&(i[e]=r[e])}))})),a.state={loading:!0,layers:[],backgroundImage:Ze,layerOptions:{radius:L.a.RADIUS,elevation:L.a.ELEVATION,cellSize:L.a.RADIUS},mapStyle:"mapbox://styles/mapbox/"+(e.dark?"dark":"streets")+"-v9",initialViewState:i,subsetBoundsChange:!1,lastViewPortChange:new Date,colorName:"default",iconLimit:L.a.ICONLIMIT,legend:!1,multiVarSelect:{},width:window.innerWidth,height:window.innerHeight,tooltipColumns:{column1:"accident_severity",column2:"date"},geographyURL:Object({NODE_ENV:"production",PUBLIC_URL:"/eAtlas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/layik/eatlas-data/main/casualties.csv"}).REACT_APP_GEOGRAPHY_URL||null,geographyColumn:Object({NODE_ENV:"production",PUBLIC_URL:"/eAtlas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/layik/eatlas-data/main/casualties.csv"}).REACT_APP_GEOGRAPHY_COLUMN_NAME||null,column:Object({NODE_ENV:"production",PUBLIC_URL:"/eAtlas",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGF5aWsiLCJhIjoiY2ppNXFndGNzMGtpaDNxbXNqd2Rqc3BqZyJ9.355os6YWhIKPVaSiX01QIA",REACT_APP_DEFAULT_URL:"https://raw.githubusercontent.com/layik/eatlas-data/main/casualties.csv"}).REACT_APP_COLUMN_NAME||null},a._generateLayer=a._generateLayer.bind(Object(g.a)(a)),a._renderTooltip=a._renderTooltip.bind(Object(g.a)(a)),a._fetchAndUpdateState=a._fetchAndUpdateState.bind(Object(g.a)(a)),a._fitViewport=a._fitViewport.bind(Object(g.a)(a)),a._initWithGeojson=a._initWithGeojson.bind(Object(g.a)(a)),a._updateURL=a._updateURL.bind(Object(g.a)(a)),a._throttleUR=Object(Xe.throttle)((function(e){return a._updateURL(e)}),300),a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this._fetchAndUpdateState(),window.addEventListener("resize",this._resize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resize)}},{key:"_fetchAndUpdateState",value:function(e,t){var n=this;if((!e||Object(S.v)(e))&&(!t||"object"===typeof t)){var a=e||qe;Object(S.h)(a,(function(e,i){var r=n.state.geographyURL;Object(S.v)(r)?Object(S.h)(r,(function(a,i){i?n.setState({loading:!1,alert:{content:"Could not reach: "+r}}):(n.setState({loading:!1,geography:a,data:e,alert:t||null}),n._fitViewport(a),n._generateLayer())})):n._initWithGeojson(i,e,t,a)}))}}},{key:"_initWithGeojson",value:function(e,t,n,a){e?this.setState({loading:!1,alert:{content:"Could not reach: "+a}}):(this.setState({loading:!1,data:t,alert:n||null}),this._fitViewport(t),this._generateLayer())}},{key:"_generateLayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layerOptions,a=void 0===n?{}:n,i=t.filter,r=t.cn;if(i&&"mapstyle"===i.what){var o="mapbox://styles/mapbox/"+i.selected+"-v9";this.setState({mapStyle:i&&"mapstyle"===i.what?"No map"===i.selected?L.a.BLANKSTYLE:o:this.state.mapStyle})}else{var c=this.state.data&&this.state.data.features;if(c){var l=i&&"column"===i.what&&i.selected||this.state.column,u=l||1,d=this.state,h=d.colorName,f=d.iconLimit,p=d.geography,b=d.geographyColumn,j=d.multiVarSelect;i&&"%"===i.what&&(c=c.slice(0,i.selected/100*c.length)),this.state.coords&&(c=this.state.filtered);var g=i&&"multi"===i.what||Object.keys(j).length,m=i&&"coords"===i.what,y=i&&i.selected||j;if(g||m){var v=Object(S.o)(c[0].properties);if(!(c=c.filter((function(t){if(g)for(var n=0,a=Object.keys(y);n<a.length;n++){var r=a[n],o=r===v?le.DateTime.fromISO(t.properties[r]).year+"":t.properties[r]+"";if(!y[r].has(o))return!1}return!m||0===k.a.difference(i.selected||e.state.coords,t.geometry.coordinates.flat()).length})))||!c.length)return void this.setState({alert:{content:"Filtering returns no results"}})}var O=Object(ne.g)(p?p.features[0]:c[0]).toLowerCase();if(("polygon"===O||"multipolygon"===O)&&p){if(c.length,p.features.length,!(c=Object(S.y)(p,c,b))||!c.features)return void this.setState({alert:{content:"Is there a matching geography column?"}});c=c.features||c}var x=i&&"layerStyle"===i.what&&i.selected||this.state.layerStyle||Object(S.A)(p?p.features:c);new RegExp("point","i").test(O)||(x="geojson");var C=c.length<f&&!x&&(!i||"layerStyle"!==i.what)&&"point"===O;C&&(x="icon");var _=Object.assign(Object(s.a)(Object(s.a)({},this.state.layerOptions),{},{lightSettings:w.LIGHT_SETTINGS,colorRange:Object(S.e)(r||h),getColor:Object(S.n)(r||h)}),a),E=Object(S.k)(c,u),A=function(e){return e.properties[+u?Object.keys(e.properties)[u]:u]};"heatmap"===x&&(_.getPosition=function(e){return e.geometry.coordinates},_.updateTriggers={getWeight:"function"===typeof _.getWeight&&c.map((function(e){return _.getWeight(e)}))}),"linestring"===O&&(x="line",_.getColor=function(e){return[235,170,20]},_.getPath=function(e){return e.geometry.coordinates},_.onClick=function(t){t&&t.hasOwnProperty("coordinate")&&["path","arc","line"].includes(e.state.layerStyle)&&t.object.geometry.coordinates&&e._generateLayer({filter:{what:"coords",selected:t.object.geometry.coordinates[0]}})},"line"===x&&(_.getSourcePosition=function(e){return e.geometry.coordinates[0]},_.getTargetPosition=function(e){return e.geometry.coordinates[1]}),+(c[0]&&c[0].properties&&c[0].properties[u])&&(_.getWidth=function(t){return e._newRange(c,t,u,Object(S.r)(E),Object(S.q)(E))})),"scatter"===x&&+(c[0]&&c[0].properties&&c[0].properties[u])&&(_.getRadius=function(t){return e._newRange(c,t,u,Object(S.r)(E),Object(S.q)(E))});var N=this.state.legend;if("polygon"===O||"multipolygon"===O||"geojson"===x){var M=function(t){return Object(S.f)(+A(t)?+A(t):A(t),E,180,r||e.state.colorName)};_.getFillColor=M,_.updateTriggers={getFillColor:c.map((function(e){return M(e)}))};var P=+c[0].properties[+u?Object.keys(c[0].properties)[u]:u];P&&(N=Object(S.l)({domain:E,title:Object(S.t)(l),interpolate:Object(S.d)(r||this.state.colorName)}))}"barvis"===x&&(_.getPosition=function(e){return[e.geometry.coordinates[0],e.geometry.coordinates[1],0]},_.getScale=20,_.updateTriggers={getRotationAngle:"function"===typeof _.getRotationAngle&&c.map((function(e){return _.getRotationAngle(e)})),getWidth:"function"===typeof _.getWidth&&c.map((function(e){return _.getWidth(e)}))});var T=Object(S.j)(x,c,this._renderTooltip,_);this.setState({alert:C?{content:"Switched to icon mode. "}:null,loading:!1,layerStyle:x,geomType:O,tooltip:"",filtered:c,layers:[T],layerOptions:_,multiVarSelect:i&&"multi"===i.what?i.selected:j,road_type:i&&"road_type"===i.what?i.selected:this.state.road_type,colorName:r||h,column:l,coords:i&&"coords"===i.what?i.selected:this.state.coords,legend:N})}}}},{key:"_fitViewport",value:function(e,t){var n=e||this.state.data;if(n&&0!==n.length||t){var a=t?t.bbox:Object(C.default)(n),i=t?[t.lon,t.lat]:Object(x.default)(n).geometry.coordinates;this.map.fitBounds(a,{padding:"100px"});var r=Object(s.a)(Object(s.a)({},this.state.viewport),{},{longitude:i[0],latitude:i[1],transitionDuration:500,transitionInterpolator:new O.a});this.setState({viewport:r})}}},{key:"_renderTooltip",value:function(e){var t=e.x,n=e.y,a=e.object;a?this.setState({tooltip:Object(H.jsx)(Ke,Object(s.a)(Object(s.a)({},this.state.tooltipColumns),{},{isMobile:Object(S.u)(),topx:t,topy:n,hoveredObject:a}))}):this.setState({tooltip:""})}},{key:"_updateURL",value:function(e){var t=this,n=e.latitude,a=e.longitude,i=e.zoom,r=e.bearing,o=e.pitch,c=e.altitude,s=this.state,l=s.subsetBoundsChange,u=s.lastViewPortChange;new Date-u>1e3&&(He.push("/?lat=".concat(n.toFixed(3))+"&lng=".concat(a.toFixed(3))+"&zoom=".concat(i.toFixed(2))+"&bea=".concat(r)+"&pit=".concat(o)+"&alt=".concat(c)),this.setState({lastViewPortChange:new Date}));var d=this.map&&this.map.getBounds();if(d&&l){var h=Object(S.m)(d),f=h.xmin,p=h.ymin,b=h.xmax,j=h.ymax;Object(S.h)(qe+f+"/"+p+"/"+b+"/"+j,(function(e,n){n||(t.setState({data:e.features}),t._generateLayer())}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.tooltip,a=t.viewport,i=t.initialViewState,r=t.loading,o=t.mapStyle,c=t.alert,l=t.data,u=t.filtered,d=t.layerStyle,h=t.geomType,f=t.legend,p=t.coords;return Object(H.jsxs)("div",{id:"html2pdf",children:[Object(H.jsx)("div",{className:"loader",style:{zIndex:r?999:-1,visibility:"string"===typeof o&&o.endsWith("No map-v9")?"hidden":"visible"}}),Object(H.jsxs)(O.c,{ref:function(t){e.map=t&&t.getMap()},mapStyle:o,onViewportChange:function(t){e._throttleUR(t),e.setState({viewport:t})},height:this.state.height-54+"px",width:this.state.width+"px",viewState:a||i,children:[Object(H.jsx)("div",{className:"mapboxgl-ctrl-top-right",style:{zIndex:9},children:Object(H.jsx)(O.b,Object(s.a)(Object(s.a)({},a),{},{onViewportChange:function(t){return e.setState({viewport:t})}}))}),Object(H.jsx)(v.a,{viewState:a||i,initialViewState:i,layers:this.state.layers,onClick:function(t){!t.layer&&p&&(e.setState({coords:null}),e._generateLayer())},children:n})]}),Object(H.jsx)(Ve,{dark:this.props.dark,layerStyle:d,isMobile:Object(S.u)(),alert:c,unfilteredData:l&&l.features,data:u,colourCallback:function(t){return e._generateLayer({cn:t})},urlCallback:function(t,n){if(e.setState({geography:null,column:null,tooltip:"",road_type:"",layerOptions:{radius:L.a.RADIUS,elevation:L.a.ELEVATION},loading:!0,coords:null}),n)try{e.setState({data:n}),e._fitViewport(n),e._generateLayer()}catch(a){e._fetchAndUpdateState(void 0,{content:a.message})}else e._fetchAndUpdateState(t)},column:this.state.column,onSelectCallback:function(t){return e._generateLayer({filter:t})},onLayerOptionsCallback:function(t){return e._generateLayer({layerOptions:t})},toggleSubsetBoundsChange:function(t){e.setState({loading:!0,subsetBoundsChange:t}),e._fetchAndUpdateState()},onlocationChange:function(t){e._fitViewport(void 0,t)},datasetName:qe},"decksidebar"),f&&("polygon"===h||"multipolygon"===h)&&Object(H.jsx)("div",{className:"right-side-panel mapbox-legend",children:f})]})}},{key:"_newRange",value:function(e,t,n,a,i){var r=10,o=.1;return e.length>1e5&&(r=.5,o=.005),Object(S.g)(t.properties[n],{oldMin:a,oldMax:i,newMax:r,newMin:o})}}]),n}(i.a.Component),Qe=n(2061),$e=n(1003),et=n(1019),tt=n(2053),nt=n(2074),at=[{key:1,to:"fui",title:"DUI"},{key:2,to:"about",title:"About"}];var it=Object(nt.a)((function(e){var t=Object(a.useState)(e.dark),n=Object(c.a)(t,2),i=n[0],r=n[1];return Object(H.jsxs)(Qe.a,{inverse:i,collapseOnSelect:!0,children:[Object(H.jsxs)(Qe.a.Header,{children:[Object(H.jsx)(Qe.a.Brand,{children:Object(H.jsx)(tt.a,{to:"/",children:Object(H.jsx)("svg",{className:"logo",viewBox:"0 0 1025 428",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",children:Object(S.a)(i)})})}),Object(H.jsx)(Qe.a.Toggle,{})]}),Object(H.jsxs)(Qe.a.Collapse,{children:[Object(H.jsx)($e.a,{children:at.map((function(t,n){return Object(H.jsx)(et.a,{eventKey:t.key,onClick:function(){return e.history.push(t.to)},children:t.title},n)}))}),Object(H.jsx)($e.a,{pullRight:!0,children:Object(H.jsx)(et.a,{href:"https://github.com/layik/eAtlas",children:Object(H.jsx)("i",{style:{fontSize:"1.5em"},className:"fa fa-github"})})}),Object(H.jsx)($e.a,{pullRight:!0,children:Object(H.jsx)(et.a,{onClick:function(){"function"===typeof e.toggleTheme&&e.toggleTheme(),r(!i)},children:Object(H.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(H.jsx)("g",{transform:"matrix( 1 0 0 1 4 1 )",children:Object(H.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.3999 11C15.7999 10.1 16 9 16 8C16 3.6 12.4 0 8 0C3.6 0 0 3.6 0 8C0 9.1 0.200098 10.1 0.600098 11L2.19995 15L13.8 15L15.3999 11ZM11 22L12.6001 18L3.3999 18L5 22L11 22Z",fill:i?"#fff":"#000",opacity:"1"})})})})})]})]})})),rt=n(1008),ot=n.n(rt),ct=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={markdown:null},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://raw.githubusercontent.com/layik/eAtlas/master/README.md").then((function(e){return e.text()})).then((function(t){e.setState({markdown:ot()(t)})}))}},{key:"render",value:function(){var e=this.state.markdown;return Object(H.jsx)("section",{style:{background:"white",padding:"5%"},children:Object(H.jsx)("article",{dangerouslySetInnerHTML:{__html:e}})})}}]),n}(a.Component),st=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={component:null},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.load().then((function(t){e.setState((function(){return{component:t.default?t.default:t}}))}))}},{key:"render",value:function(){return this.props.children(this.state.component)}}]),n}(a.Component),lt=new p.a,ut=function(e){return Object(H.jsx)(st,{load:function(){return n.e(3).then(n.bind(null,2078))},children:function(t){return null===t?Object(H.jsx)("div",{className:"loader",style:{zIndex:999}}):Object(H.jsx)(t,Object(s.a)({},e))}})};var dt=function(){var e=Object(a.useState)(!0),t=Object(c.a)(e,2),n=t[0],i=t[1];return Object(H.jsx)(d.a,{basename:"/eAtlas",children:Object(H.jsxs)("main",{style:{background:n?"#242730":"white",margin:"auto",color:n?"#a3a5a8":"black"},children:[Object(H.jsx)(it,{dark:n,toggleTheme:function(){return i(!n)}}),Object(H.jsx)(h.Provider,{value:lt,children:Object(H.jsx)(f.BaseProvider,{theme:n?f.DarkTheme:f.LightTheme,children:Object(H.jsxs)(l.a,{children:[Object(H.jsx)(u.a,{exact:!0,path:"/",component:function(e){return Object(H.jsx)(Je,Object(s.a)(Object(s.a)({},e),{},{dark:n}))}}),Object(H.jsx)(u.a,{exact:!0,path:"/fui",component:function(e){return Object(H.jsx)(ut,Object(s.a)(Object(s.a)({},e),{},{dark:n}))}}),Object(H.jsx)(u.a,{exact:!0,path:"/about",component:ct})]})})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(H.jsx)(dt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},244:function(e,t,n){"use strict";n.d(t,"b",(function(){return H})),n.d(t,"a",(function(){return G}));var a=n(2077),i=n(1017),r=n(2058),o=n(2066),c=n(2062),s=n(2072),l=n(2073),u=n(601),d=n(2060),h=n(2065),f=n(417),p=n(58),b=n(59),j=n(603),g=n(220),m=n(70),y=n(71),v=n(619),O=n(978),x=n(434),C=n(344),k=n(1012),S=n(987),w=function(e){Object(m.a)(n,e);var t=Object(y.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"getShaders",value:function(){return Object(j.a)(Object(g.a)(n.prototype),"getShaders",this).call(this,{vs:"\n  attribute vec3 positions;\n  attribute vec3 instancePositions;\n  attribute vec3 instancePositions64Low;\n  attribute float instanceRadius;\n  attribute vec4 instanceColors;\n  attribute float instanceScale;\n  attribute float instanceRotationAngle;\n  attribute float instanceWidth;\n  // for onHover to work must\n  // delcare instancePickingColors here and assign it to\n  // geometry.pickingColor\n  // and then register DECKGL_FILTER_COLOR hook in\n  // fragment shader\n  attribute vec3 instancePickingColors;\n\n  varying vec4 vColor;\n  varying vec2 vPosition;\n\n  vec2 rotate_by_angle(vec2 vertex, float angle) {\n    float angle_radian = angle * PI / 180.0;\n    float cos_angle = cos(angle_radian);\n    float sin_angle = sin(angle_radian);\n    mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n    return rotationMatrix * vertex;\n  }\n\n  void main(void) {\n    geometry.pickingColor = instancePickingColors;\n\n    vec3 offsetCommon = positions * project_size(instanceRadius);\n    offsetCommon = vec3(rotate_by_angle(offsetCommon.xy, instanceRotationAngle), 0);\n    offsetCommon.x = offsetCommon.x * instanceWidth;\n    // width first\n    offsetCommon = offsetCommon * instanceScale;\n    \n    vec3 positionCommon = project_position(instancePositions, instancePositions64Low);\n    // missx: So in your shader, positionCommon is the anchor position on the map. \n    // offsetCommon is the local coordinate relative to the anchor\n    // You want to leave the anchor alone and rotate the offset\n\n    gl_Position = project_common_position_to_clipspace(vec4(positionCommon + offsetCommon, 1.0));\n\n    vPosition = positions.xy;\n    vColor = instanceColors;\n    DECKGL_FILTER_COLOR(vColor, geometry);\n\n  }",fs:"\n  precision highp float;\n\n  uniform float smoothRadius;\n\n  varying vec4 vColor;\n  varying vec2 vPosition;\n\n  void main(void) {    \n    float distToCenter = length(vPosition);\n\n    if (distToCenter > 1.0) {\n      discard;\n    }\n\n    float alpha = smoothstep(1.0, 1.0 - smoothRadius, distToCenter);\n    gl_FragColor = vec4(vColor.rgb, vColor.a * alpha);\n    DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n  }",modules:[v.a,O.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:C.a.DOUBLE,accessor:"getPosition"},instanceRadius:{size:1,accessor:"getRadius",defaultValue:1},instanceColors:{size:4,type:C.a.UNSIGNED_BYTE,accessor:"getColor",defaultValue:[1,0,0,255]},smoothRadius:{size:1,normalized:!0,type:C.a.UNSIGNED_BYTE,accessor:"smoothRadius",defaultValue:[1,0,0,255]},instanceScale:{size:1,accessor:"getScale",defaultValue:1},instanceRotationAngle:{size:1,accessor:"getRotationAngle",defaultValue:1},instanceWidth:{size:1,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(e){var t=e.props,a=e.oldProps,i=e.changeFlags;if(Object(j.a)(Object(g.a)(n.prototype),"updateState",this).call(this,{props:t,oldProps:a,changeFlags:i}),i.extensionsChanged){var r=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(r)})}}},{key:"draw",value:function(e){var t=e.uniforms;this.state.model.setUniforms(t).setUniforms({smoothRadius:this.props.smoothRadius}).draw()}},{key:"_getModel",value:function(e){return new k.a(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new S.a({drawMode:C.a.TRIANGLE_STRIP,vertexCount:6,attributes:{positions:{size:2,value:new Float32Array([-.1,-1,.1,-1,-.1,1,-.1,1,.1,1,.1,-1])}}}),isInstanced:!0}))}}]),n}(x.a);w.layerName="BarLayer",w.defaultProps={getPosition:{type:"accessor",value:function(e){return e.position}},getRadius:{type:"accessor",value:30},getColor:{type:"accessor",value:[0,0,0,255]},smoothRadius:{type:"number",min:0,value:.5},getScale:{type:"accessor",value:1},getRotationAngle:{type:"accessor",value:1},getWidth:{type:"accessor",value:1}};var L=n(42),_=function(e,t){return Object.keys(e).forEach((function(n){t[n]=e[n]})),t},E=function(e,t,n,a,i){return{type:e,min:t,max:n,default:a,step:i}},A={pickable:{type:"boolean",value:!0},extruded:{type:"boolean",value:!0}},N={},M={class:{value:a.a,type:"class"},extruded:{type:"boolean",value:!0},radius:E("number",50,1e3,100,50),elevationScale:E("number",1,8,1,2),getPosition:function(e){return e.geometry.coordinates}};N.hex=_(A,M);var P={class:{value:i.a,type:"class"},opacity:E("number",0,1,.8,.1),getRadius:E("number",10,1e3,30,10),radiusScale:E("number",0,1,.8,.1),radiusMinPixels:E("number",1,10,1,1),radiusMaxPixels:E("number",1,100,100,5)};N.scatterplot=_(A,P);var T={class:{value:r.a,type:"class"},stroked:{type:"boolean",value:!1},filled:{type:"boolean",value:!0},lineWidthScale:E("number",20,100,20,5),lineWidthMinPixels:E("number",2,20,2,2),getRadius:E("number",10,1e3,30,10),getLineWidth:E("number",1,10,1,1),getElevation:E("number",30,100,30,10)};N.geojson=_(A,T);var R={class:{value:f.a,type:"class"},wrapLongitude:{type:"boolean",value:!1}};N.icon=_(A,R);var F={class:{value:o.a,type:"class"},cellSizePixels:E("number",50,100,50,5)};N.sgrid=_(A,F);var z={class:{value:c.a,type:"class"},cellSize:E("number",100,5e3,100,50),elevationScale:E("number",4,10,4,2)};N.grid=_(A,z);var I={class:{value:s.a,type:"class"},getPosition:function(e){return e.geometry.coordinates}};N.line=_(A,I);var D={class:{value:l.a,type:"class"}};N.arc=_(A,D);var U={class:{value:u.a,type:"class"}};N.path=_(A,U);var W={class:{value:d.a,type:"class"},getWeight:{type:"column",value:"number",default:1}};N.heatmap=_(A,W);var V={class:{value:h.a,type:"class"}};N.text=_(A,V);var B={class:{value:w,type:"class"},getRotationAngle:{type:"column",value:"number",default:1},getWidth:{type:"column",value:"number",default:1}};N.barvis=_(A,B);var H=function(e){return Object(L.isString)(e)?Object.freeze(N[e]):null},G=Object.keys(N)},417:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(58),i=n(59),r=n(70),o=n(71),c=n(2021),s=n(602),l=n(1015);var u=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"shouldUpdateState",value:function(e){return e.changeFlags.somethingChanged}},{key:"updateState",value:function(e){var t=e.props,n=e.oldProps,a=e.changeFlags.dataChanged||t.sizeScale!==n.sizeScale;if(a){var i=new l.a({maxZoom:16,radius:t.sizeScale});i.load(t.data.map((function(e){return{geometry:{coordinates:t.getPosition(e)},properties:e}}))),this.setState({index:i})}var r=Math.floor(this.context.viewport.zoom);(a||r!==this.state.z)&&this.setState({data:this.state.index.getClusters([-180,-85,180,85],r),z:r})}},{key:"getPickingInfo",value:function(e){var t=e.info,n=e.mode,a=t.object&&t.object.properties;return a&&(a.cluster&&"hover"!==n&&(t.objects=this.state.index.getLeaves(a.cluster_id,25).map((function(e){return e.properties}))),t.object=a),t}},{key:"renderLayers",value:function(){var e=this.state.data,t=this.props,n=t.iconAtlas,a=t.iconMapping,i=t.sizeScale;return new s.a(this.getSubLayerProps({id:"icon",data:e,iconAtlas:n,iconMapping:a,sizeScale:i,getPosition:function(e){return e.geometry.coordinates},getIcon:function(e){return 0===(t=e.properties.cluster?e.properties.point_count:1)?"":t<10?"marker-".concat(t):t<100?"marker-".concat(Math.floor(t/10),"0"):"marker-100";var t},getSize:function(e){return t=e.properties.cluster?e.properties.point_count:1,Math.min(100,t)/100+1;var t}}))}}]),n}(c.a)},42:function(e,t){var n=function(e){return null!==e&&void 0!==e&&e.constructor===String},a=function(e){return null!==e&&void 0!==e&&e.constructor===Number},i=function(e){return null!==e&&void 0!==e&&e.constructor===Boolean};t.randomToNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.floor(Math.random()*e)},t.isBoolean=i,t.isString=n,t.isNumber=a,t.isObject=function(e){return null!==e&&void 0!==e&&e.constructor===Object},t.isArray=function(e){return null!==e&&void 0!==e&&e.constructor===Array},t.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t.sanitizeFloat=function(e){if(a(e))return e;if(n(e)){var t=parseFloat(e);return isNaN(t)?null:t}return null},t.sanitizeInt=function(e){return a(e)?e:n(e)?parseInt(e):null},t.sanitizeString=function(e){return n(e)?e:a(e)?e.toString():null},t.sanitizeStringNonNull=function(e){return n(e)?e:a(e)?e.toString():""},t.sanitizeBool=function(e){return i(e)?e:a(e)?Boolean(e):null},t.isEmptyOrSpaces=function(e){return null===e||null!==e.match(/^ *$/)}},429:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(218),i=n(41),r=n(39),o=n(2),c=n(63),s=n(2023),l=n(20),u=n(65),d=n(3),h=u.PLOT_W,f=Object(c.n)(c.l);function p(e){var t=Object(o.useState)(),n=Object(r.a)(t,2),u=n[0],p=n[1],b=Object(o.useState)(null),j=Object(r.a)(b,2),g=j[0],m=j[1],y=Object(o.useState)(null),v=Object(r.a)(y,2),O=v[0],x=v[1],C=Object(o.useState)(null),k=Object(r.a)(C,2),S=k[0],w=k[1],L=Object(o.useState)(null),_=Object(r.a)(L,2),E=_[0],A=_[1],N=Object(o.useState)(null),M=Object(r.a)(N,2),P=M[0],T=M[1],R=Object(o.useState)([]),F=Object(r.a)(R,2),z=F[0],I=F[1],D=e.type;if(!D)return null;var U=10,W=e.type!==c.h&&!e.noLimit&&e.data&&e.data.length>U?e.data.slice(0,U):e.data,V=e.plotStyle,B=e.title,H=e.noXAxis,G=e.noYAxis,Y=e.onValueClick,K=e.onDragSelected;if(!W||!W.length)return null;var X=W.map((function(e,t){return Object(i.a)(Object(i.a)({},e),{},{color:W.length===z.length?0:Number(!z.includes(t))})}));return Object(d.jsxs)("div",{className:"unselectable",style:{position:"relative"},onMouseDown:function(e){g||O||(m(e.clientX),x(e.clientY))},onMouseMove:function(e){if(g&&O){var t=e.clientX,n=e.clientY;w(t),A(n),T(Object(d.jsx)("div",{style:{position:"fixed",left:g>t?t:g,top:O>E?n:O,width:Math.abs(t-g),height:Math.abs(n-O),backgroundColor:"gray",opacity:.2}}))}},onMouseUp:function(e){m(null),x(null),w(null),A(null),T(null),P&&"function"===typeof K&&K(z.map((function(e){return X[e]&&X[e].x}))),I([])},onMouseOut:function(){P||I([])},children:[e.type!==c.h&&!e.noLimit&&e.data&&e.data.length>U&&Object(d.jsxs)("h4",{children:["Plotting first ",U," values:"]}),G&&B&&Object(d.jsx)("h4",{children:B}),Object(d.jsxs)(f,{xType:"ordinal",margin:{bottom:V&&V.marginBottom||40},animation:{duration:1},height:V&&V.height||h,width:V&&V.width||h,onMouseLeave:function(){p(!1)},children:[!H&&Object(d.jsx)(c.k,{tickSize:0,tickFormat:function(e){return Object(l.z)(e,10)},tickValues:W.length>U?W.filter((function(e,t){if(t%Math.floor(W.length/U)===0)return e.x})).map((function(e){return e.x})):W.map((function(e){return e.x})),position:"right",tickLabelAngle:-65,style:{line:{strokeWidth:0},text:{fill:e.dark?"#fff":"#000"}}}),!G&&Object(d.jsx)(c.m,{tickSize:0,tickLabelAngle:-45,tickFormat:function(e){return Object(s.a)(".2s")(e)},style:{line:{strokeWidth:0},title:{fill:e.dark?"#fff":"#000"},text:{fill:e.dark?"#fff":"#000"}},position:"start",title:B}),Object(d.jsx)(D,{onValueClick:Y,onNearestX:function(e,t){var n=t.index,i=t.innerX;p({x:e.x,y:e.y}),P&&function(e){var t=e.x,n=e.x1,a=e.value;return n>t?a>t&&a<n:a<t&&a<n}({x:g,x1:S,value:i})?z.includes(n)||I([].concat(Object(a.a)(z),[n])):P||I([n])},colorDomain:[0,1],colorRange:["rgb(239, 93, 40)","rgb(18, 147, 154)"],data:X}),u&&Object(d.jsx)(c.d,{value:u})]}),g&&S&&P]})}},591:function(e,t){},629:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(58),i=n(59),r=n(70),o=n(71),c=n(2),s=n(990),l=n(3),u=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={progressAmount:0},e.handleDrop=function(t,n){var a=e.props.contentCallback,i=t[0];if(!i.type||i.type.match(/text.*/)||i.type.match(/geo/)||i.type.match(/json/)){var r=new FileReader;r.onload=function(t){e.setState({progressAmount:100}),e.reset();var n=r.result;"function"===typeof a&&a({text:n,name:i.name})},r.readAsText(i)}else e.setState({progressAmount:100}),e.reset(),console.log("File not supported!");e.startProgress()},e.startProgress=function(){e.intervalId=setInterval((function(){e.state.progressAmount>=100?e.reset():e.setState({progressAmount:e.state.progressAmount+10})}),500)},e.reset=function(){clearInterval(e.intervalId),e.setState({progressAmount:0})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(l.jsx)("center",{className:"file-upload",children:Object(l.jsx)(s.FileUploader,{onCancel:this.reset,onDrop:this.handleDrop,progressAmount:this.state.progressAmount,progressMessage:this.state.progressAmount&&"Uploading... ".concat(this.state.progressAmount,"% of 100%")})})}}]),n}(c.Component)},643:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(39),i=n(2),r=n(2022),o=n(1020),c=n(2025),s=n(596),l=n(20),u=n(3);function d(e){var t=e.urlCallback,n=Object(i.useState)("https://domain.com/api/stats19"),d=Object(a.a)(n,2),h=d[0],f=d[1];return Object(u.jsx)("form",{onKeyPress:function(e){13===e.which&&(e.preventDefault(),Object(l.v)(h)&&"function"===typeof t&&t(h))},className:"search-form",children:Object(u.jsx)(r.a,{children:Object(u.jsxs)(o.a,{children:[Object(u.jsx)(c.a,{onChange:function(e){var t=e.target.value;f(t)},style:{background:e.dark?"#242730":"white",color:e.dark?"white":"black"},value:h,placeholder:h,type:"text"}),Object(u.jsx)(o.a.Addon,{style:{background:e.dark?"#242730":"white",color:e.dark?"white":"black"},children:Object(u.jsx)(s.a,{glyph:"globe"})})]})})})}},65:function(e,t){function n(e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}n("PRD_URL","https://layik.github.io/eAtlas"),n("DEV_URL","http://localhost:8000"),n("UI_LIST",["checkbox","radio","buttongroups","dropdown","slider"]),n("DECKGL_INIT",{longitude:-1.6362,latitude:53.8321,zoom:10,pitch:55,bearing:0}),n("LIGHT_SETTINGS",{lightsPosition:[-.144528,49.739968,8e3,-3.807751,54.104682,8e3],ambientRatio:.4,diffuseRatio:.6,specularRatio:.2,lightsStrength:[.8,0,.8,0],numberOfLights:2}),n("PLOT_W",250),n("TURQUOISE_RANGE",["#12939A","#1293FF"]),n("BLANKSTYLE",{version:8,name:"Blank",center:[0,0],zoom:0,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}],id:"blank"}),n("ICONLIMIT",500),n("ELEVATION",4),n("RADIUS",100),n("DATE_REGEX","date|time|datetime|year")},697:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(39),i=n(2),r=(n(1187),n(20)),o=n(42),c=n(91),s=n(173),l=n(136),u=n(3);function d(e){var t=e.onSelectCallback,n=e.multiVarSelect,d=e.unfilteredData,h=Object(i.useState)(n&&Object.keys(n)),f=Object(a.a)(h,2),p=f[0],b=f[1];if(!d||!d[0])return null;if(d&&0===Object.keys(d[0].properties).filter((function(e){return!Object(o.isEmptyOrSpaces)(e)})).length)return Object(u.jsx)("h3",{children:"There are no columns to inspect or filter."});var j=Object(c.b)(d[0]),g=Object.keys(d[0].properties).map((function(e){return{id:Object(r.t)(e)+" ["+j[e].name+"]",value:e}})),m=Array.from(new Set(p.map((function(e){return e.value})).concat(Object.keys(n))));return m=m.map((function(e){return{id:Object(r.t)(e)+" ["+j[e].name+"]",value:e}})),Object(u.jsxs)("div",{style:e.style,children:["Column to filter:",Object(u.jsx)(s.Select,{labelKey:"id",valueKey:"value",placeholder:"Chose column ("+g.length+")",maxDropdownHeight:"300px",type:s.TYPE.search,multi:!0,onChange:function(e){var a=e.value,i=a.map((function(e){return e.value}));Object.keys(n).map((function(e){i.includes(e)||(n[e].size?(delete n[e],"function"===typeof t&&t(n)):delete n[e])})),b(a)},value:m,options:g}),m&&m.map((function(e){return e.value})).map((function(e){var a=[];return d.forEach((function(t){return Object.keys(t.properties).forEach((function(n){return n===e&&t.properties[e]&&!a.includes(t.properties[e])&&a.push(t.properties[e])}))})),Object(u.jsxs)(u.Fragment,{children:[Object(r.t)(e),Object(u.jsx)(l.a,{title:"Available ("+a.length+")",filter:e,multiVarSelect:n,values:a.map((function(e){return{id:e+"",value:e+""}})),onSelectCallback:function(e){"function"===typeof t&&t(e.selected||{})},value:n[e]&&Array.from(n[e]).map((function(e){return{id:e+"",value:e+""}}))})]})}))]})}},698:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(39),i=n(2),r=n.n(i),o=n(427),c=n(598),s=n(20),l=n(3);function u(e){var t=r.a.useState(1),n=Object(a.a)(t,2),i=n[0],u=n[1],d=e.data;if(!d||0===d.length)return null;var h=Math.floor(d.length/10),f=Object.keys(d[0].properties).map((function(e){return Object(s.t)(e)})),p=d.slice(10*i,10*i+10).map((function(e){return Object.keys(e.properties).map((function(t){return e.properties[t]}))}));return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.Pagination,{numPages:h,currentPage:i,onPageChange:function(e){var t=e.nextPage;u(Math.min(Math.max(t,1),h))}}),Object(l.jsx)(o.Table,{columns:f,data:p}),Object(l.jsx)(c.Pagination,{numPages:h,currentPage:i,onPageChange:function(e){var t=e.nextPage;u(Math.min(Math.max(t,1),h))}})]})}},708:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(58),i=n(59),r=n(70),o=n(71),c=n(2),s=n.n(c),l=n(237),u=n(428),d=n(53),h=n(998),f=n(173),p=n(20),b=n(3),j=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={checks:[]},i}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.sublist,i=t.suggested,r=t.onChange,o=t.steps;if(!n||!a||0===a.length)return null;var c=this.state.checks,s=i||Object(p.B)(a.length),j=null;if("checkbox"===s)j=Object(b.jsx)(b.Fragment,{children:a.map((function(t,n){return Object(b.jsx)(u.Checkbox,{checked:e.state.checks[n],value:t,onChange:function(){c[n]=!c[n],e.setState({checks:c})},children:t},t)}))});else if("slider"===s&&parseInt(a[0])){var g=a;j=Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.Slider,{value:this.state.value||[g[0]],min:parseInt(g[0]),max:parseInt(g[g.length-1]),step:o||1,onChange:function(t){var n=t.value;e.setState({value:n}),"function"===typeof r&&r(n[0])}}),n]})}else j="buttongroups"===s?Object(b.jsxs)(b.Fragment,{children:["Checkbox Mode StatefulButtonGroup",Object(b.jsx)(h.StatefulButtonGroup,{mode:"checkbox",initialState:{selected:[0]},children:a.map((function(e,t){return Object(b.jsx)(d.Button,{value:e,onClick:function(e){return console.log(e.target.value)},children:e},e+"-"+t)}))})]}):Object(b.jsx)(f.StatefulSelect,{options:a.map((function(e){return{id:e}})),labelKey:"id",placeholder:"Choose "+Object(p.t)(n),type:f.TYPE.search,onChange:function(e){return console.log(e&&e.value[0]&&e.value[0].id)}});return j}}]),n}(s.a.Component)},91:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return r}));var a=n(42),i=n(274).DateTime,r=function(e){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type},o=function(e){if(!e||"Feature"!==e.type)return null;var t={};return Object.keys(e.properties).forEach((function(n){var i=String,r=e.properties[n];d(r)?i=Date:Object(a.isNumber)(r)?i=Number:Object(a.isBoolean)(r)?i=Boolean:Object(a.isObject)(r)&&(i=Object),t[n]=i})),t},c=function(e,t){if(!e||!e.features)return null;var n={},a=new Set;return e.features.forEach((function(e){e.properties&&Object.keys(e.properties)&&Object.keys(e.properties).forEach((function(i){t&&t===i?a.add(e.properties[i]):("object"===typeof n[i]||(n[i]=new Set),n[i].add(e.properties[i]))}))})),t?Array.from(a):n},s=function(e,t,n){if(e&&t){var a=[],i=n;return n&&0!==n.length||(i=c({features:e},t)),e.forEach((function(e){Object.keys(e.properties).forEach((function(n){if(n===t){var r=i.indexOf(e.properties[n]);a[r]&&a[r].x===e.properties[n]?a[r].y+=1:a[r]={x:e.properties[n],y:1}}}))})),a}},l=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&t&&n&&t!==n){var i={};return e.forEach((function(e){var r=e.properties;if(r&&Object.keys(r)){var o=a&&new Date(r[n])&&new Date(r[n]).getFullYear()?new Date(r[n]).getFullYear():r[n];Object.keys(r).forEach((function(e){e===t&&(i[o]&&i[o][r[e]]?i[o][r[e]]+=1:i[o]=Object.assign(i[o]||{},{[r[e]]:1}))}))}})),i}},u=function(e,t){return e.features?e.features.map((function(e){var n={x:e.geometry.coordinates[0],y:e.geometry.coordinates[1]};return t&&e.properties[t]&&(n.size=e.properties[t]),n})):null};function d(e){return i.fromFormat(e+"","MMMM dd yyyy").isValid||i.fromFormat(e+"","MMMM d yyyy").isValid||i.fromFormat(e+"","MMM d yyyy").isValid||i.fromFormat(e+"","MMM dd yyyy").isValid||i.fromFormat(e+"","dd/MM/yyyy").isValid||i.fromFormat(e+"","dd-MM-yyyy").isValid||i.fromFormat(e+"","yyyy/mm/dd").isValid||i.fromFormat(e+"","yyyy-mm-dd").isValid||i.fromISO(e).isValid||i.fromHTTP(e).isValid||typeof e===Number&&i.fromMillis(e).isValid}},972:function(e,t,n){},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(218),i=n(39),r=n(2),o=n(53),c=n(282),s=n(63),l=n(136),u=n(41),d=n(65),h=n(3),f=Object(s.n)(s.i),p=d.PLOT_W;function b(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],o=n[1],c=e.data,s=e.plotStyle,l=e.title,d={animation:{damping:9,stiffness:300},data:c,onLeafMouseOver:function(e){return o({hoveredNode:e})},onLeafMouseOut:function(){return o({hoveredNode:!1})},mode:"squarify",getLabel:function(e){return e.name},width:s&&s.width||p+50,height:s&&s.height||p};return c&&0!==c.length?Object(h.jsxs)("div",{className:"dynamic-treemap-example",children:[Object(h.jsx)("h6",{children:l}),Object(h.jsx)(f,Object(u.a)({},d)),a&&a.value]}):null}var j=n(20),g=n(42),m=n(429),y=["Vertical Bar","Horizontal Bar","Line","Pop. Pyramid","Treemap"];function v(e,t,n,a,i,r){if(e&&0!==e.length&&Object(g.isString)(t)&&Object(g.isString)(n)){var o=Object(j.C)(e,t);return"Treemap"===n?Object(h.jsx)(b,{plotStyle:a,data:{title:t+" "+n,color:1,children:o.map((function(t,n){return{name:t.x,size:+t.y/e.length,color:Object(g.isNumber)(t.x)||n,style:{border:"thin solid red"}}}))},title:Object(j.t)(t)}):n.startsWith("Vertical")||n.startsWith("Horizontal")||n.startsWith("Line")?Object(h.jsx)(m.a,{dark:r,noLimit:i,plotStyle:a,data:o,type:n.startsWith("Vertical")?s.j:n.startsWith("Horizontal")?s.e:s.g,title:Object(j.t)(t),noYAxis:!0}):void 0}}function O(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),s=n[0],u=n[1],d=Object(r.useState)(!1),f=Object(i.a)(d,2),p=f[0],b=f[1],g=Object(r.useState)([]),m=Object(i.a)(g,2),O=m[0],x=m[1],C=e.data,k=e.onSelectCallback,S=e.dark,w=e.noAccordion,L=e.plotStyle,_=e.noLimit;if(!C||0===C.length)return null;var E=Object.keys(C[0].properties);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h6",{children:"Generate graphs from columns"}),Object(h.jsxs)("div",{className:"searchField",children:[Object(h.jsx)(l.a,{single:!0,title:"Choose column",values:E.map((function(e){return{id:Object(j.t)(e),value:e}})),onSelectCallback:function(e){u(e),"function"===typeof k&&k(e)},value:s}),s.length>0&&Object(h.jsx)(l.a,{single:!0,title:"Choose vis",values:y.map((function(e){return{id:e,value:e}})),onSelectCallback:function(e){b(e)},value:p})]}),Object(h.jsx)(o.Button,{kind:o.KIND.secondary,size:o.SIZE.compact,onClick:function(){0!==s.length&&0!==p.length&&s[0]&&x([].concat(Object(a.a)(O),[v(C,s[0].value,p[0].value,L,S,_)]))},children:"Add"}),Object(h.jsx)("div",{className:"visArea",children:w?Object(h.jsx)("center",{children:O.map((function(e,t){return e&&Object(h.jsxs)("div",{children:[Object(h.jsx)(o.Button,{kind:o.KIND.secondary,size:o.SIZE.compact,onClick:function(){x(O.filter((function(e,n){return t!==n})))},children:"X"}),e]})}))}):Object(h.jsx)(c.Accordion,{overrides:{Root:{style:{width:"270px"}}},expanded:!0,onChange:function(e){var t=e.expanded;return console.log(t)},children:O.map((function(e,t){return Object(h.jsxs)(c.Panel,{children:[Object(h.jsx)(o.Button,{kind:o.KIND.secondary,size:o.SIZE.compact,onClick:function(){x(O.filter((function(e,n){return t!==n})))},children:"X"}),e]},"panel-"+t)}))})})]})}},984:function(e){e.exports=JSON.parse('{"marker-1":{"x":0,"y":0,"width":128,"height":128,"anchorY":128},"marker-2":{"x":128,"y":0,"width":128,"height":128,"anchorY":128},"marker-3":{"x":256,"y":0,"width":128,"height":128,"anchorY":128},"marker-4":{"x":384,"y":0,"width":128,"height":128,"anchorY":128},"marker-5":{"x":0,"y":128,"width":128,"height":128,"anchorY":128},"marker-6":{"x":128,"y":128,"width":128,"height":128,"anchorY":128},"marker-7":{"x":256,"y":128,"width":128,"height":128,"anchorY":128},"marker-8":{"x":384,"y":128,"width":128,"height":128,"anchorY":128},"marker-9":{"x":0,"y":256,"width":128,"height":128,"anchorY":128},"marker-10":{"x":128,"y":256,"width":128,"height":128,"anchorY":128},"marker-20":{"x":256,"y":256,"width":128,"height":128,"anchorY":128},"marker-30":{"x":384,"y":256,"width":128,"height":128,"anchorY":128},"marker-40":{"x":0,"y":384,"width":128,"height":128,"anchorY":128},"marker-50":{"x":128,"y":384,"width":128,"height":128,"anchorY":128},"marker-60":{"x":256,"y":384,"width":128,"height":128,"anchorY":128},"marker-70":{"x":384,"y":384,"width":128,"height":128,"anchorY":128},"marker-80":{"x":0,"y":512,"width":128,"height":128,"anchorY":128},"marker-90":{"x":128,"y":512,"width":128,"height":128,"anchorY":128},"marker-100":{"x":256,"y":512,"width":128,"height":128,"anchorY":128},"marker":{"x":384,"y":512,"width":128,"height":128,"anchorY":128}}')}},[[2015,1,2]]]);
//# sourceMappingURL=main.572eed9d.chunk.js.map